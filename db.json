{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/assets/finish.png","path":"assets/finish.png","modified":0,"renderable":0},{"_id":"themes/yilia/source/main.0cf68a.css","path":"main.0cf68a.css","modified":0,"renderable":1},{"_id":"themes/yilia/source/slider.e37972.js","path":"slider.e37972.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/main.0cf68a.js","path":"main.0cf68a.js","modified":0,"renderable":1},{"_id":"themes/yilia/source/mobile.992cbe.js","path":"mobile.992cbe.js","modified":0,"renderable":1},{"_id":"source/assets/images/weixin.jpg","path":"assets/images/weixin.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/alipay.jpg","path":"assets/images/alipay.jpg","modified":0,"renderable":0},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","path":"fonts/default-skin.b257fa.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","path":"fonts/iconfont.16acc2.ttf","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","path":"fonts/iconfont.45d7ee.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","path":"fonts/iconfont.8c627f.woff","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","path":"fonts/tooltip.4004ff.svg","modified":0,"renderable":1},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","path":"fonts/iconfont.b322fa.eot","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/default-skin.png","path":"img/default-skin.png","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/preloader.gif","path":"img/preloader.gif","modified":0,"renderable":1},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","path":"img/scrollbar_arrow.png","modified":0,"renderable":1},{"_id":"source/assets/images/avatar.jpg","path":"assets/images/avatar.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/20180206234949.png","path":"assets/images/2018-02-06/20180206234949.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/20180206235648.png","path":"assets/images/2018-02-06/20180206235648.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/20180207000230.png","path":"assets/images/2018-02-06/20180207000230.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-07/20180207165109.png","path":"assets/images/2018-02-07/20180207165109.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-07/20180207205017.png","path":"assets/images/2018-02-07/20180207205017.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-09/20180209224814.png","path":"assets/images/2018-02-09/20180209224814.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-09/20180209225531.png","path":"assets/images/2018-02-09/20180209225531.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-24/01.png","path":"assets/images/2018-03-24/01.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-25/setup-alpine.png","path":"assets/images/2018-03-25/setup-alpine.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/20180206233431.png","path":"assets/images/2018-02-06/20180206233431.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/default-ssh.png","path":"assets/images/2018-02-08/install/default-ssh.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/dns.png","path":"assets/images/2018-02-08/install/dns.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/ip-config.png","path":"assets/images/2018-02-08/install/ip-config.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/keyboard-layout.png","path":"assets/images/2018-02-08/install/keyboard-layout.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/root-ssh.png","path":"assets/images/2018-02-08/install/root-ssh.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/mirror.png","path":"assets/images/2018-02-08/install/mirror.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/sshserver.png","path":"assets/images/2018-02-08/install/sshserver.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/setup-alpine.png","path":"assets/images/2018-02-08/install/setup-alpine.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/install/format.png","path":"assets/images/2018-02-08/install/format.png","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/2015011809154211067.jpg","path":"assets/images/2018-02-06/2015011809154211067.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-07/2015011809283211487.jpg","path":"assets/images/2018-02-07/2015011809283211487.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-06/2015011811124013974.jpg","path":"assets/images/2018-02-06/2015011811124013974.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-25/01.jpg","path":"assets/images/2018-03-25/01.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-28/01.jpg","path":"assets/images/2018-03-28/01.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-26/dog-2449668_1920.jpg","path":"assets/images/2018-02-26/dog-2449668_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-26/dear-2309801_1920.jpg","path":"assets/images/2018-02-26/dear-2309801_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-25/03.jpg","path":"assets/images/2018-03-25/03.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-05/2015011809285211521.jpg","path":"assets/images/2018-02-05/2015011809285211521.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-03-25/02.jpg","path":"assets/images/2018-03-25/02.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-09/travel-3136679_1920.jpg","path":"assets/images/2018-02-09/travel-3136679_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg","path":"assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-08/201501172300446668.jpg","path":"assets/images/2018-02-08/201501172300446668.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-07/2015011809214111213.jpg","path":"assets/images/2018-02-07/2015011809214111213.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-26/elephant-3177249_1920.jpg","path":"assets/images/2018-02-26/elephant-3177249_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-02-09/seashell-3043735_1920.jpg","path":"assets/images/2018-02-09/seashell-3043735_1920.jpg","modified":0,"renderable":0},{"_id":"source/assets/images/2018-05-06/success.png","path":"assets/images/2018-05-06/success.png","modified":0,"renderable":0}],"Cache":[{"_id":"themes/yilia/README.md","hash":"1bf755806af9d8874bd22e1abbdaaa24328ef4dc","modified":1531726737048},{"_id":"themes/yilia/package.json","hash":"367cb9579d35968a942c243ab248a5f5ebfaf462","modified":1531726737059},{"_id":"themes/yilia/webpack.config.js","hash":"05ba46a4ae744272f5312e684928910dccad3755","modified":1531726737086},{"_id":"source/_posts/ab.md","hash":"9fea58ce935935a48fff75704fd7061259f3c2bc","modified":1531720823000},{"_id":"source/_posts/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance.md","hash":"94ec87b6fe7b6ce10a9be5d97b5423e725fda60e","modified":1531720823000},{"_id":"source/_posts/alpine-setup-scripts.md","hash":"e9a7ae02c19ee5fcae17641c9a677ad71fd0bb40","modified":1531720823000},{"_id":"source/_posts/angular-primer.md","hash":"a698cd292e76438667ce78255f288744e30bc00b","modified":1531720823000},{"_id":"source/_posts/aws-ssr.md","hash":"dd2d932d719e98123146fa969fc3a985f3abf4b3","modified":1531720823000},{"_id":"source/_posts/docker-common.md","hash":"3ab2598c1b975df0feb92e5495b09a71ff48a980","modified":1531720823000},{"_id":"source/_posts/git-command.md","hash":"db4716a5a2f72162d753212320c217d0b01d7a10","modified":1531720823000},{"_id":"source/_posts/install-alpine-linux.md","hash":"f5ebe803ed285421c90a0b25423447c07f95ef99","modified":1531720823000},{"_id":"source/_posts/hello-world.md","hash":"ea428df8f95d7bb0e13785bb231f096e63151cb6","modified":1531720823000},{"_id":"source/_posts/install-docker-on-alpine-linux.md","hash":"0ba365b54d3297c8a17f81d83ef07f3279d8a531","modified":1531720823000},{"_id":"source/_posts/install-docker-on-ubuntu.md","hash":"8835574ed945e41bda07b961a6c833cf4af60eba","modified":1531722198000},{"_id":"source/_posts/install-zsh-on-ubuntu-alpine.md","hash":"f5c95bd83a7167c90ef1cd5f04d893afa047acf6","modified":1531720823000},{"_id":"source/_posts/multiple-databases-with-spring-boot-and-spring-data-jpa.md","hash":"b5ca907de66d9fdb65ab665383887ace4308b184","modified":1531720823000},{"_id":"source/_posts/run-postgres-instance-on-docker.md","hash":"c343d8b596ca33f6b3207ea8b6f7fa7ac1840ef3","modified":1531720823000},{"_id":"source/_posts/nvm-install-node.md","hash":"a29868cdd6c0cd29286c6fa29bf5bc5fe27f0898","modified":1531720823000},{"_id":"source/_posts/ubuntu-desktop.md","hash":"d92134457fe50cb20420cf03898f77f6f61378a8","modified":1531720823000},{"_id":"source/_posts/spring-boot-thymeleaf.md","hash":"3333135631c7209e5a8af01a7fe99e86c8a96b7a","modified":1531720823000},{"_id":"themes/yilia/languages/default.yml","hash":"3083f319b352d21d80fc5e20113ddf27889c9d11","modified":1531726737048},{"_id":"source/_posts/ubuntu-install-jdk.md","hash":"adb160ed2c2720666be525b63ea9248ad1296b52","modified":1531720823000},{"_id":"themes/yilia/languages/fr.yml","hash":"84ab164b37c6abf625473e9a0c18f6f815dd5fd9","modified":1531726737049},{"_id":"themes/yilia/languages/nl.yml","hash":"12ed59faba1fc4e8cdd1d42ab55ef518dde8039c","modified":1531726737049},{"_id":"themes/yilia/languages/no.yml","hash":"965a171e70347215ec726952e63f5b47930931ef","modified":1531726737049},{"_id":"themes/yilia/languages/ru.yml","hash":"4fda301bbd8b39f2c714e2c934eccc4b27c0a2b0","modified":1531726737049},{"_id":"themes/yilia/languages/zh-CN.yml","hash":"ca40697097ab0b3672a80b455d3f4081292d1eed","modified":1531726737049},{"_id":"themes/yilia/languages/zh-tw.yml","hash":"53ce3000c5f767759c7d2c4efcaa9049788599c3","modified":1531726737049},{"_id":"source/assets/finish.png","hash":"850300fc37701032515e95ed60aa6e8c5e8bcdec","modified":1531720823000},{"_id":"themes/yilia/layout/archive.ejs","hash":"2703b07cc8ac64ae46d1d263f4653013c7e1666b","modified":1531726737057},{"_id":"themes/yilia/layout/category.ejs","hash":"765426a9c8236828dc34759e604cc2c52292835a","modified":1531726737058},{"_id":"themes/yilia/layout/index.ejs","hash":"a35dc900203f9d8dd863ea4c1722198d6d457ec8","modified":1531726737058},{"_id":"themes/yilia/layout/layout.ejs","hash":"0a332bdbd3b86c231d690614687f5b97186b85d5","modified":1531726737058},{"_id":"themes/yilia/layout/page.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1531726737058},{"_id":"themes/yilia/layout/post.ejs","hash":"7d80e4e36b14d30a7cd2ac1f61376d9ebf264e8b","modified":1531726737058},{"_id":"themes/yilia/layout/tag.ejs","hash":"eaa7b4ccb2ca7befb90142e4e68995fb1ea68b2e","modified":1531726737059},{"_id":"themes/yilia/source/main.0cf68a.css","hash":"ddf6e2c6b953c2c59a3c271e6070010a4cc81cf9","modified":1531726737082},{"_id":"themes/yilia/source/slider.e37972.js","hash":"6dec4e220c89049037eebc44404abd8455d22ad7","modified":1531726737086},{"_id":"themes/yilia/source-src/css.ejs","hash":"94dbdb02ca11849e415d54fb28546a598f2cffb1","modified":1531726737059},{"_id":"themes/yilia/source-src/script.ejs","hash":"c21381e1317db7bb157f1d182b8c088cb7cba411","modified":1531726737077},{"_id":"source/_posts/alpine-tools.md","hash":"5dd49c7d3a083445c1fb862340439f02286f8b1c","modified":1531720823000},{"_id":"themes/yilia/layout/_partial/toc.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1531726737057},{"_id":"themes/yilia/source/main.0cf68a.js","hash":"993fadeb5f6d296e9d997a49ee20dc97333ceab7","modified":1531726737084},{"_id":"themes/yilia/source/mobile.992cbe.js","hash":"01b35e71e37aa2849664eb5daf26daede2278398","modified":1531726737086},{"_id":"source/assets/images/weixin.jpg","hash":"4353414314d79026b0462b1e825a864bb0927d59","modified":1531720823000},{"_id":"source/assets/images/alipay.jpg","hash":"2ce045dc569b7fcb5dbf70d26b6dbbb0520b08b2","modified":1531720823000},{"_id":"themes/yilia/layout/_partial/archive-post.ejs","hash":"1f7d4819b7f67602c4a1b99871808d2160b60978","modified":1531726737050},{"_id":"themes/yilia/layout/_partial/after-footer.ejs","hash":"b86b248720ad415ec1b5fee53fb583776c776f83","modified":1531726737050},{"_id":"themes/yilia/layout/_partial/archive.ejs","hash":"a6e94061ac55b9eb55275f87b608d62f6ea35659","modified":1531726737050},{"_id":"themes/yilia/layout/_partial/article.ejs","hash":"630c6ec866d056657d3d91e34b4c64eb993c0654","modified":1531726737050},{"_id":"themes/yilia/layout/_partial/aside.ejs","hash":"8edbd7993b9b061611a193533a664e2e85eae748","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/baidu-analytics.ejs","hash":"f0e6e88f9f7eb08b8fe51449a8a3016273507924","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/css.ejs","hash":"236f8a377b2e4e35754319c3029bcd4a4115431d","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/footer.ejs","hash":"f2994e0acd1d606ebf4680afc4fa652e148ccf4e","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/google-analytics.ejs","hash":"f921e7f9223d7c95165e0f835f353b2938e40c45","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/head.ejs","hash":"64f092186b5a744aa1603ce22bb1d44a34446add","modified":1531726737051},{"_id":"themes/yilia/layout/_partial/left-col.ejs","hash":"183d7ca4ba8e7c80694ffdc8cf39957092238346","modified":1531726737052},{"_id":"themes/yilia/layout/_partial/mobile-nav.ejs","hash":"7fbbfabf5e29525b24ada14613c21a26789132b4","modified":1531726737052},{"_id":"themes/yilia/layout/_partial/tools.ejs","hash":"c41341b9618e591538e1136a2d1637587c1bbd90","modified":1531726737057},{"_id":"themes/yilia/layout/_partial/viewer.ejs","hash":"e495790b2abe2290875817e42bd505bc611d3e26","modified":1531726737057},{"_id":"themes/yilia/source/fonts/default-skin.b257fa.svg","hash":"2ac727c9e092331d35cce95af209ccfac6d4c7c7","modified":1531726737077},{"_id":"themes/yilia/source/fonts/iconfont.16acc2.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1531726737078},{"_id":"themes/yilia/source/fonts/iconfont.45d7ee.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1531726737079},{"_id":"themes/yilia/source/fonts/iconfont.8c627f.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1531726737080},{"_id":"themes/yilia/source/fonts/tooltip.4004ff.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1531726737081},{"_id":"themes/yilia/source/fonts/iconfont.b322fa.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1531726737080},{"_id":"themes/yilia/source/img/default-skin.png","hash":"ed95a8e40a2c3478c5915376acb8e5f33677f24d","modified":1531726737081},{"_id":"themes/yilia/source/img/preloader.gif","hash":"6342367c93c82da1b9c620e97c84a389cc43d96d","modified":1531726737081},{"_id":"themes/yilia/source/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1531726737081},{"_id":"themes/yilia/source-src/css/_core.scss","hash":"24f347a2412abbf58318369152504da9538f8d3b","modified":1531726737060},{"_id":"themes/yilia/source-src/css/_function.scss","hash":"93a50dd19a93485712da1f8d0a1672482dd1eabc","modified":1531726737060},{"_id":"themes/yilia/source-src/css/archive.scss","hash":"7d27e22ac898e8fafec14549e940c73cbea1fba8","modified":1531726737061},{"_id":"themes/yilia/source-src/css/article-inner.scss","hash":"d79f2d35a06de83a2a226ca790b7a0a34789c115","modified":1531726737061},{"_id":"themes/yilia/source-src/css/article-main.scss","hash":"3fad68bd74260326f83090b0974dd80707e7bac7","modified":1531726737061},{"_id":"themes/yilia/source-src/css/article-nav.scss","hash":"43e507f2a48504079afd9471353337e23ca47470","modified":1531726737061},{"_id":"themes/yilia/source-src/css/article.scss","hash":"0f6d61af99ed4db87f8589db1feaea7747b55963","modified":1531726737062},{"_id":"themes/yilia/source-src/css/aside.scss","hash":"578a67464dd0f542197f7fcee158c991db058563","modified":1531726737063},{"_id":"themes/yilia/source-src/css/comment.scss","hash":"cafe3834017a3bf47420f37543725025225a2c89","modified":1531726737063},{"_id":"themes/yilia/source-src/css/fonts.scss","hash":"97b8fba41c914145710b90091f400b845879577f","modified":1531726737065},{"_id":"themes/yilia/source-src/css/footer.scss","hash":"7c995410b25baaf61dfc5e148e22ca60330abcd3","modified":1531726737068},{"_id":"themes/yilia/source-src/css/global.scss","hash":"b4cb4f45a55d4250cd9056f76dab2a3c0dabcec4","modified":1531726737068},{"_id":"themes/yilia/source-src/css/grid.scss","hash":"849a29fcd7150214fcf7b9715fa5dc71d1f9b896","modified":1531726737069},{"_id":"themes/yilia/source-src/css/highlight.scss","hash":"3719994c2c9393813cc1d42b657205c368a329cb","modified":1531726737069},{"_id":"themes/yilia/source-src/css/left.scss","hash":"0d30c0e7cdb831c3881a017006c782f2214ac195","modified":1531726737070},{"_id":"themes/yilia/source-src/css/main.scss","hash":"2f86a014af93583caba78a563d9549826bf28294","modified":1531726737070},{"_id":"themes/yilia/source-src/css/mobile-slider.scss","hash":"f053c609d84df0dd9eee1d11ddf0c19163a456be","modified":1531726737070},{"_id":"themes/yilia/layout/_partial/header.ejs","hash":"6387a93dad7c3d778eb91e3821852fbf6813880c","modified":1531726737052},{"_id":"themes/yilia/layout/_partial/mathjax.ejs","hash":"151a1ef2173ba7b6789d349f0f8da89616cc1394","modified":1531726737052},{"_id":"themes/yilia/source-src/css/mobile.scss","hash":"ace041d72f95b419f6a5e443191703c2b62007f4","modified":1531726737071},{"_id":"themes/yilia/source-src/css/page.scss","hash":"bf206bb7f7d0967bc8b7fdf01b7ffc99aff9ba88","modified":1531726737071},{"_id":"themes/yilia/source-src/css/reward.scss","hash":"80a4fcf9171d4a33235da96ac8a2b7dcabc45dfb","modified":1531726737071},{"_id":"themes/yilia/source-src/css/share.scss","hash":"150c6425f6582e7ec78a873256ce49c9930e8805","modified":1531726737071},{"_id":"themes/yilia/source-src/css/scroll.scss","hash":"9c8dfd1c76854ef063494ca76fac6360b391ed6d","modified":1531726737071},{"_id":"themes/yilia/source-src/css/social.scss","hash":"724162ccf3977e70a45d189abfaa20b6e2fba87b","modified":1531726737071},{"_id":"themes/yilia/source-src/css/tags-cloud.scss","hash":"c8aa84fca93862d3caae77c552873b8610f33327","modified":1531726737072},{"_id":"themes/yilia/source-src/css/tags.scss","hash":"ac67a3c7097849206244db9b0ba91daaba017ef5","modified":1531726737072},{"_id":"themes/yilia/source-src/css/tools.scss","hash":"1b1aa0908e58cf942b28e3881d07c5573c4129e1","modified":1531726737072},{"_id":"themes/yilia/source-src/css/tooltip.scss","hash":"53d5a554bc2f38e9bb3d26400a47767013c05216","modified":1531726737072},{"_id":"themes/yilia/source-src/js/Q.js","hash":"d011af172064b6c6e0c7051d8f9879373ddac113","modified":1531726737074},{"_id":"themes/yilia/source-src/js/anm.js","hash":"4a4c5d82b09a3063f91a434388e6aa064fd7fd98","modified":1531726737074},{"_id":"themes/yilia/source-src/js/aside.js","hash":"754f771264548a6c5a8ad842908e59ae4e7ed099","modified":1531726737074},{"_id":"themes/yilia/source-src/js/browser.js","hash":"04095b38cfd4316a23f8eb14b1ffaf95f78a4260","modified":1531726737074},{"_id":"themes/yilia/source-src/js/fix.js","hash":"d6782d53c992e712af39c84e804eccaf38830b94","modified":1531726737075},{"_id":"themes/yilia/source-src/js/main.js","hash":"3894e60827c817319e43c9ff3ed045fc3d7336ce","modified":1531726737075},{"_id":"themes/yilia/source-src/js/mobile.js","hash":"4d823b039fd296d24a454eae5a798b93c44560cb","modified":1531726737075},{"_id":"themes/yilia/source-src/js/report.js","hash":"4f1d9a18a936ce40b037f636a39127dd19175b6e","modified":1531726737076},{"_id":"themes/yilia/source-src/js/share.js","hash":"b090f82cf80cba7da764753906d9e2cc2acdf30d","modified":1531726737076},{"_id":"themes/yilia/source-src/js/slider.js","hash":"e846bcc5aac9c68b93f7b8de353df54d8d29f666","modified":1531726737076},{"_id":"themes/yilia/source-src/js/util.js","hash":"8456e9d6b19532742582c99b2fb9d09e146e1c58","modified":1531726737076},{"_id":"themes/yilia/source-src/js/viewer.js","hash":"2577deb6a9fe4f5436360b2ce9afcc7f9a7f0116","modified":1531726737076},{"_id":"source/assets/images/avatar.jpg","hash":"e9801187dcb18942508eda5a7b280dc049d6b7b0","modified":1531720823000},{"_id":"themes/yilia/layout/_partial/script.ejs","hash":"4cb685f07e89dd5175c2a576e73a1a957aec5637","modified":1531726737057},{"_id":"source/assets/images/2018-02-06/20180206234949.png","hash":"b5a4a20fcbeef9e95e1db51703996cbffdc5ad5d","modified":1531720823000},{"_id":"source/assets/images/2018-02-06/20180206235648.png","hash":"5325557924a51b038b45a82da9151852281d967e","modified":1531720823000},{"_id":"source/assets/images/2018-02-06/20180207000230.png","hash":"2c9a6ccfafafb10fb56735b95dff8d4b45db809b","modified":1531720823000},{"_id":"source/assets/images/2018-02-07/20180207165109.png","hash":"c115b26cc6a6acc10016e8d5f154135bf9a3d618","modified":1531720823000},{"_id":"source/assets/images/2018-02-07/20180207205017.png","hash":"f44776996ac9a8d4dcd694d22a1c2e1a5de12faa","modified":1531720823000},{"_id":"source/assets/images/2018-02-09/20180209224814.png","hash":"7ac1427bb07ed018181d1c9066006db2dbc62e28","modified":1531720823000},{"_id":"source/assets/images/2018-02-09/20180209225531.png","hash":"8bba27c32c90296184179dcfd808babf0026daa4","modified":1531720823000},{"_id":"source/assets/images/2018-03-24/01.png","hash":"754735e6a23767740f9f0686d2dff8a469a30fbd","modified":1531720823000},{"_id":"source/assets/images/2018-03-25/setup-alpine.png","hash":"0d3abd8298f1d2f78ead7da47de418315cf84dfa","modified":1531720823000},{"_id":"themes/yilia/layout/_partial/post/category.ejs","hash":"0809a4829aabeb4e911a3ed04ec28db4df7dfe3f","modified":1531726737052},{"_id":"themes/yilia/layout/_partial/post/changyan.ejs","hash":"5f99b55980da64a723a8e14d5a7daba0d6504647","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/date.ejs","hash":"ef71c4081e866a494367575c59610e7e6339ece0","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/duoshuo.ejs","hash":"e8399025ed3b980aedb821c92855889f5f12fd5b","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/gitment.ejs","hash":"e68bbac9ffb1ad27b56837c9abad6ed6bb7daa0c","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/nav.ejs","hash":"1036c8e4e1a7bc935ba173744da735a0d6ed09cd","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/share.ejs","hash":"5dccfbe165b23a101f1333cc65ed8efbd197453c","modified":1531726737053},{"_id":"themes/yilia/layout/_partial/post/tag.ejs","hash":"2e783e68755abb852760eb0e627a3fbb50a05a55","modified":1531726737054},{"_id":"themes/yilia/layout/_partial/post/title.ejs","hash":"2f275739b6f1193c123646a5a31f37d48644c667","modified":1531726737054},{"_id":"themes/yilia/layout/_partial/post/wangyiyun.ejs","hash":"ea41c462168d9697caef9485862e9cac718a12c1","modified":1531726737054},{"_id":"themes/yilia/source-src/css/fonts/iconfont.eot","hash":"bc8c5e88f4994a852041b4d83f126d9c4d419b4a","modified":1531726737066},{"_id":"themes/yilia/source-src/css/fonts/iconfont.svg","hash":"f9304e5714d20861be7d8f4d36687e88e86b9e1b","modified":1531726737067},{"_id":"themes/yilia/source-src/css/fonts/iconfont.ttf","hash":"f342ac8bf4d937f42a7d6a0032ad267ab47eb7f2","modified":1531726737068},{"_id":"themes/yilia/source-src/css/fonts/iconfont.woff","hash":"aa9672cb097f7fd73ae5a03bcd3d9d726935bc0a","modified":1531726737068},{"_id":"themes/yilia/source-src/css/core/_animation.scss","hash":"63a37f26276f9207405afe0f2d65339ce295bbaf","modified":1531726737063},{"_id":"themes/yilia/source-src/css/core/_media-queries.scss","hash":"491ab3378d5c11005ba65c607608bb36b368a9d5","modified":1531726737064},{"_id":"themes/yilia/source-src/css/core/_mixin.scss","hash":"3bba5c77bad5981eac859fe05c9561d580ba7fa9","modified":1531726737064},{"_id":"themes/yilia/source-src/css/core/_reset.scss","hash":"fab871fa93bd542e76a71a56428f2994a4aaf443","modified":1531726737064},{"_id":"themes/yilia/source-src/css/core/_variables.scss","hash":"fb511c505d1309249f21dc577d4ad2bad99a764f","modified":1531726737065},{"_id":"themes/yilia/source-src/css/img/checkered-pattern.png","hash":"049262fa0886989d750637b264bed34ab51c23c8","modified":1531726737069},{"_id":"themes/yilia/source-src/css/img/scrollbar_arrow.png","hash":"d64a33c4ddfbdb89deeb6f4e3d36eb84dc4777c0","modified":1531726737070},{"_id":"themes/yilia/source-src/css/img/tooltip.svg","hash":"397fe4b1093bf9b62457dac48aa15dac06b54a3c","modified":1531726737070},{"_id":"source/assets/images/2018-02-06/20180206233431.png","hash":"e62e4fabab17967db78ac23bb605baa1a6de55d3","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/default-ssh.png","hash":"b5cdacb06a4d1ea29155fb8e6024850bdefc457a","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/dns.png","hash":"dc7dc42577779a5ddcd0ee1de9fa8999fc314127","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/ip-config.png","hash":"9efc380bd79b9f4e9862b24092983ef97371cb3e","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/keyboard-layout.png","hash":"20088ae332f151695b1774716c4493177246965a","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/root-ssh.png","hash":"a5a318101f68b1aa932e782570fd3d6dffe79354","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/mirror.png","hash":"31f51ff9bf28a561ded8711ac3c98687a32f730a","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/sshserver.png","hash":"f52b40e3ec5dbfc9ec911aa75ea9a16dba60450d","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/setup-alpine.png","hash":"36484bee24eace41702763df6112ba877d76f63a","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/install/format.png","hash":"23ad275ed6fdabd509cb58969f4e66ab7e614c76","modified":1531720823000},{"_id":"source/assets/images/2018-02-06/2015011809154211067.jpg","hash":"70093d0c590241bb64924b732fce5525241f2422","modified":1531720823000},{"_id":"source/assets/images/2018-02-07/2015011809283211487.jpg","hash":"71509c53b1fbcd4115989c9c8ced6575890ce129","modified":1531720823000},{"_id":"source/assets/images/2018-02-06/2015011811124013974.jpg","hash":"5a5bf8f1089badb58a0da88c0c42f51d45ee04ba","modified":1531720823000},{"_id":"source/assets/images/2018-03-25/01.jpg","hash":"758aaa88dd1bad81d230364be7e83eacafc748cd","modified":1531720823000},{"_id":"source/assets/images/2018-03-28/01.jpg","hash":"7f093ce3742c5f47ce05dfaaa778cd6565b5d1a0","modified":1531720823000},{"_id":"source/assets/images/2018-02-26/dog-2449668_1920.jpg","hash":"131a52bb9c85ffdeaa54d5eb51af992a08c0b916","modified":1531720823000},{"_id":"source/assets/images/2018-02-26/dear-2309801_1920.jpg","hash":"309ae2b0f9b3b494290a204d3d234a41ae123e92","modified":1531720823000},{"_id":"source/assets/images/2018-03-25/03.jpg","hash":"e757f68cbb201bc953950c9631d87d909ab183ac","modified":1531720823000},{"_id":"source/assets/images/2018-02-05/2015011809285211521.jpg","hash":"17819e7bdd8eb2686e2039b1e87991fcbe692e5a","modified":1531720823000},{"_id":"source/assets/images/2018-03-25/02.jpg","hash":"1b362e5a24852f17835ee69fe061e65b10a76ed2","modified":1531720823000},{"_id":"source/assets/images/2018-02-09/travel-3136679_1920.jpg","hash":"92ae21a8acbdb3a3ee881cbec7e782d73282849c","modified":1531720823000},{"_id":"source/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg","hash":"e40de24b7bc90ba9eac4f9ba5596d75158137f07","modified":1531720823000},{"_id":"source/assets/images/2018-02-08/201501172300446668.jpg","hash":"047e589f4948a24e9b970ff70a8b87880df15351","modified":1531720823000},{"_id":"source/assets/images/2018-02-07/2015011809214111213.jpg","hash":"8494a7388f9949d8cf1fcb53a5e025eed419b584","modified":1531720823000},{"_id":"source/assets/images/2018-02-26/elephant-3177249_1920.jpg","hash":"7a096dc4c0945ebf6e67b270101d49c06e99f204","modified":1531720823000},{"_id":"source/assets/images/2018-02-09/seashell-3043735_1920.jpg","hash":"dcfeefb85aa61e7aee69561ec4e7ea276cfef95c","modified":1531720823000},{"_id":"source/assets/images/2018-05-06/success.png","hash":"9b298cf3bf1e2ba601db5d6a23d4d40782923e39","modified":1531720823000},{"_id":"themes/yilia/.babelrc","hash":"b1b76475ac17dc9e2fa50af96c9e31eea2d0f2b4","modified":1531726737047},{"_id":"themes/yilia/.editorconfig","hash":"da6d022b8f4d9c961e2f8f80677e92af8de0db4d","modified":1531726737047},{"_id":"themes/yilia/.eslintignore","hash":"df0a50b13cc00acb749226fee3cee6e0351fb1d9","modified":1531726737047},{"_id":"themes/yilia/.gitattributes","hash":"e0f24dceeb1e6878a1dd9b01a2b9df1bc037a867","modified":1531726737047},{"_id":"themes/yilia/_config.yml","hash":"88b56231498186c5597a80adef7105b5cc455554","modified":1531730622043},{"_id":"themes/yilia/.eslintrc.js","hash":"5696ae049de010ed3786768b0c359f14c05b5ec6","modified":1531726737047}],"Category":[],"Data":[],"Page":[],"Post":[{"layout":"post","title":"ab","date":"2018-03-25T14:17:14.000Z","_content":"\n```shell\n\n$ ab  -n 10000000 -c 2000 -k -H \"Referer: https://www.baidu.com\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:38.0) Gecko/20100101 Firefox/38.0\" http://www.baidu.com/\n\n```\n\n","source":"_posts/ab.md","raw":"---\nlayout: post\ntitle: ab\ndate: 2018-03-25 22:17:14\ntags: ab\n---\n\n```shell\n\n$ ab  -n 10000000 -c 2000 -k -H \"Referer: https://www.baidu.com\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:38.0) Gecko/20100101 Firefox/38.0\" http://www.baidu.com/\n\n```\n\n","slug":"ab","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ylv0000fwljdpbxapoh","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">$</span> ab  -n 10000000 -c 2000 -k -H \"Referer: https://www.baidu.com\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:38.0) Gecko/20100101 Firefox/38.0\" http://www.baidu.com/</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">$</span> ab  -n 10000000 -c 2000 -k -H \"Referer: https://www.baidu.com\" -H \"User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:38.0) Gecko/20100101 Firefox/38.0\" http://www.baidu.com/</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"kickstart [unattended installation alpine]","date":"2018-03-25T07:36:12.000Z","_content":"\n![](https://blog.xlinyu.com/assets/images/2018-03-25/03.jpg)\n\n> https://netboot.xyz\n>\n> https://github.com/clandmeter/alpine-netboot\n>\n> https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile\n>\n>https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\n>\n>https://github.com/sjiveson/nfs-server-alpine\n\n<!--more-->\n\n![setup-alpine](https://blog.xlinyu.com/assets/images/2018-03-25/setup-alpine.png)\n\n```shell\n➜  ~ setup-alpine -c ks.cfg\nAnswer file ks.cfg has been created.  Please add or remove options as desired in that file\n \n ➜  ~ cat ks.cfg\n# Example answer file for setup-alpine script\n# If you don't want to use a certain option, then comment it out\n\n# Use US layout with US variant\nKEYMAPOPTS=\"us us\"\n\n# Set hostname to alpine-test\nHOSTNAMEOPTS=\"-n alpine-test\"\n\n# Contents of /etc/network/interfaces\nINTERFACESOPTS=\"auto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet dhcp\n    hostname alpine-test\n\"\n\n# Search domain of example.com, Google public nameserver\nDNSOPTS=\"-d example.com 8.8.8.8\"\n\n# Set timezone to UTC\nTIMEZONEOPTS=\"-z UTC\"\n\n# set http/ftp proxy\nPROXYOPTS=\"http://webproxy:8080\"\n\n# Add a random mirror\nAPKREPOSOPTS=\"-r\"\n\n# Install Openssh\nSSHDOPTS=\"-c openssh\"\n\n# Use openntpd\nNTPOPTS=\"-c openntpd\"\n\n# Use /dev/sda as a data disk\nDISKOPTS=\"-m data /dev/sda\"\n\n# Setup in /media/sdb1\nLBUOPTS=\"/media/sdb1\"\nAPKCACHEOPTS=\"/media/sdb1/cache\"\n\n\n```\n```shell\n# 必须是绝对路径\n# setup-alpine -f ~/ks.cfg\n\n```\n\n\n\n\n\n> 未完...\n","source":"_posts/alpine-setup-scripts.md","raw":"---\nlayout: post\ntitle: kickstart [unattended installation alpine]\ndate: 2018-03-25 15:36:12\ntags: alpine\n---\n\n![](https://blog.xlinyu.com/assets/images/2018-03-25/03.jpg)\n\n> https://netboot.xyz\n>\n> https://github.com/clandmeter/alpine-netboot\n>\n> https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile\n>\n>https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\n>\n>https://github.com/sjiveson/nfs-server-alpine\n\n<!--more-->\n\n![setup-alpine](https://blog.xlinyu.com/assets/images/2018-03-25/setup-alpine.png)\n\n```shell\n➜  ~ setup-alpine -c ks.cfg\nAnswer file ks.cfg has been created.  Please add or remove options as desired in that file\n \n ➜  ~ cat ks.cfg\n# Example answer file for setup-alpine script\n# If you don't want to use a certain option, then comment it out\n\n# Use US layout with US variant\nKEYMAPOPTS=\"us us\"\n\n# Set hostname to alpine-test\nHOSTNAMEOPTS=\"-n alpine-test\"\n\n# Contents of /etc/network/interfaces\nINTERFACESOPTS=\"auto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet dhcp\n    hostname alpine-test\n\"\n\n# Search domain of example.com, Google public nameserver\nDNSOPTS=\"-d example.com 8.8.8.8\"\n\n# Set timezone to UTC\nTIMEZONEOPTS=\"-z UTC\"\n\n# set http/ftp proxy\nPROXYOPTS=\"http://webproxy:8080\"\n\n# Add a random mirror\nAPKREPOSOPTS=\"-r\"\n\n# Install Openssh\nSSHDOPTS=\"-c openssh\"\n\n# Use openntpd\nNTPOPTS=\"-c openntpd\"\n\n# Use /dev/sda as a data disk\nDISKOPTS=\"-m data /dev/sda\"\n\n# Setup in /media/sdb1\nLBUOPTS=\"/media/sdb1\"\nAPKCACHEOPTS=\"/media/sdb1/cache\"\n\n\n```\n```shell\n# 必须是绝对路径\n# setup-alpine -f ~/ks.cfg\n\n```\n\n\n\n\n\n> 未完...\n","slug":"alpine-setup-scripts","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ym50001fwlj3s5y9uif","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/03.jpg\" alt=\"\"></p>\n<blockquote>\n<p><a href=\"https://netboot.xyz\" target=\"_blank\" rel=\"noopener\">https://netboot.xyz</a></p>\n<p><a href=\"https://github.com/clandmeter/alpine-netboot\" target=\"_blank\" rel=\"noopener\">https://github.com/clandmeter/alpine-netboot</a></p>\n<p><a href=\"https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile\" target=\"_blank\" rel=\"noopener\">https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile</a></p>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</a></p>\n<p><a href=\"https://github.com/sjiveson/nfs-server-alpine\" target=\"_blank\" rel=\"noopener\">https://github.com/sjiveson/nfs-server-alpine</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/setup-alpine.png\" alt=\"setup-alpine\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ setup-alpine -c ks.cfg</span><br><span class=\"line\">Answer file ks.cfg has been created.  Please add or remove options as desired in that file</span><br><span class=\"line\"> </span><br><span class=\"line\"> ➜  ~ cat ks.cfg</span><br><span class=\"line\"><span class=\"meta\">#</span> Example answer file for setup-alpine script</span><br><span class=\"line\"><span class=\"meta\">#</span> If you don't want to use a certain option, then comment it out</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use US layout with US variant</span><br><span class=\"line\">KEYMAPOPTS=\"us us\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Set hostname to alpine-test</span><br><span class=\"line\">HOSTNAMEOPTS=\"-n alpine-test\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Contents of /etc/network/interfaces</span><br><span class=\"line\">INTERFACESOPTS=\"auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\"></span><br><span class=\"line\">auto eth0</span><br><span class=\"line\">iface eth0 inet dhcp</span><br><span class=\"line\">    hostname alpine-test</span><br><span class=\"line\">\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Search domain of example.com, Google public nameserver</span><br><span class=\"line\">DNSOPTS=\"-d example.com 8.8.8.8\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Set timezone to UTC</span><br><span class=\"line\">TIMEZONEOPTS=\"-z UTC\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> set http/ftp proxy</span><br><span class=\"line\">PROXYOPTS=\"http://webproxy:8080\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Add a random mirror</span><br><span class=\"line\">APKREPOSOPTS=\"-r\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Install Openssh</span><br><span class=\"line\">SSHDOPTS=\"-c openssh\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use openntpd</span><br><span class=\"line\">NTPOPTS=\"-c openntpd\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use /dev/sda as a data disk</span><br><span class=\"line\">DISKOPTS=\"-m data /dev/sda\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Setup in /media/sdb1</span><br><span class=\"line\">LBUOPTS=\"/media/sdb1\"</span><br><span class=\"line\">APKCACHEOPTS=\"/media/sdb1/cache\"</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 必须是绝对路径</span><br><span class=\"line\"><span class=\"meta\">#</span> setup-alpine -f ~/ks.cfg</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>未完…</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/03.jpg\" alt=\"\"></p>\n<blockquote>\n<p><a href=\"https://netboot.xyz\" target=\"_blank\" rel=\"noopener\">https://netboot.xyz</a></p>\n<p><a href=\"https://github.com/clandmeter/alpine-netboot\" target=\"_blank\" rel=\"noopener\">https://github.com/clandmeter/alpine-netboot</a></p>\n<p><a href=\"https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile\" target=\"_blank\" rel=\"noopener\">https://github.com/gaulinux/MyLinuxSettings/blob/master/setup-alpine-answerfile</a></p>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</a></p>\n<p><a href=\"https://github.com/sjiveson/nfs-server-alpine\" target=\"_blank\" rel=\"noopener\">https://github.com/sjiveson/nfs-server-alpine</a></p>\n</blockquote>","more":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/setup-alpine.png\" alt=\"setup-alpine\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ setup-alpine -c ks.cfg</span><br><span class=\"line\">Answer file ks.cfg has been created.  Please add or remove options as desired in that file</span><br><span class=\"line\"> </span><br><span class=\"line\"> ➜  ~ cat ks.cfg</span><br><span class=\"line\"><span class=\"meta\">#</span> Example answer file for setup-alpine script</span><br><span class=\"line\"><span class=\"meta\">#</span> If you don't want to use a certain option, then comment it out</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use US layout with US variant</span><br><span class=\"line\">KEYMAPOPTS=\"us us\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Set hostname to alpine-test</span><br><span class=\"line\">HOSTNAMEOPTS=\"-n alpine-test\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Contents of /etc/network/interfaces</span><br><span class=\"line\">INTERFACESOPTS=\"auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\"></span><br><span class=\"line\">auto eth0</span><br><span class=\"line\">iface eth0 inet dhcp</span><br><span class=\"line\">    hostname alpine-test</span><br><span class=\"line\">\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Search domain of example.com, Google public nameserver</span><br><span class=\"line\">DNSOPTS=\"-d example.com 8.8.8.8\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Set timezone to UTC</span><br><span class=\"line\">TIMEZONEOPTS=\"-z UTC\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> set http/ftp proxy</span><br><span class=\"line\">PROXYOPTS=\"http://webproxy:8080\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Add a random mirror</span><br><span class=\"line\">APKREPOSOPTS=\"-r\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Install Openssh</span><br><span class=\"line\">SSHDOPTS=\"-c openssh\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use openntpd</span><br><span class=\"line\">NTPOPTS=\"-c openntpd\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Use /dev/sda as a data disk</span><br><span class=\"line\">DISKOPTS=\"-m data /dev/sda\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> Setup in /media/sdb1</span><br><span class=\"line\">LBUOPTS=\"/media/sdb1\"</span><br><span class=\"line\">APKCACHEOPTS=\"/media/sdb1/cache\"</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 必须是绝对路径</span><br><span class=\"line\"><span class=\"meta\">#</span> setup-alpine -f ~/ks.cfg</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>未完…</p>\n</blockquote>"},{"layout":"post","title":"aws-ssr","date":"2018-02-26T12:12:09.000Z","_content":"\n![ssr](https://blog.xlinyu.com/assets/images/2018-02-26/dear-2309801_1920.jpg)\n\n使用孟买节点，感觉速度还可以 https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard:\n\n<!--more-->\n\n```\ndocker pull s0fx2/shadowsocks-rss-alpine\n\n# 需要开放443端口，参数可以查看github，也可以手动指定\ndocker run -d --name ssr -it -p 443:443 s0fx2/shadowsocks-rss-alpine\n```\n\n","source":"_posts/aws-ssr.md","raw":"---\nlayout: post\ntitle: aws-ssr\ndate: 2018-02-26 20:12:09\ntags: ['ssr', 'ss']\n---\n\n![ssr](https://blog.xlinyu.com/assets/images/2018-02-26/dear-2309801_1920.jpg)\n\n使用孟买节点，感觉速度还可以 https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard:\n\n<!--more-->\n\n```\ndocker pull s0fx2/shadowsocks-rss-alpine\n\n# 需要开放443端口，参数可以查看github，也可以手动指定\ndocker run -d --name ssr -it -p 443:443 s0fx2/shadowsocks-rss-alpine\n```\n\n","slug":"aws-ssr","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymb0003fwlj6808b295","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/dear-2309801_1920.jpg\" alt=\"ssr\"></p>\n<p>使用孟买节点，感觉速度还可以 <a href=\"https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard\" target=\"_blank\" rel=\"noopener\">https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard</a>:</p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull s0fx2/shadowsocks-rss-alpine</span><br><span class=\"line\"></span><br><span class=\"line\"># 需要开放443端口，参数可以查看github，也可以手动指定</span><br><span class=\"line\">docker run -d --name ssr -it -p 443:443 s0fx2/shadowsocks-rss-alpine</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/dear-2309801_1920.jpg\" alt=\"ssr\"></p>\n<p>使用孟买节点，感觉速度还可以 <a href=\"https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard\" target=\"_blank\" rel=\"noopener\">https://ap-south-1.console.aws.amazon.com/ec2/v2/home?region=ap-south-1#LaunchInstanceWizard</a>:</p>","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull s0fx2/shadowsocks-rss-alpine</span><br><span class=\"line\"></span><br><span class=\"line\"># 需要开放443端口，参数可以查看github，也可以手动指定</span><br><span class=\"line\">docker run -d --name ssr -it -p 443:443 s0fx2/shadowsocks-rss-alpine</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"angular-primer","date":"2018-03-24T01:01:06.000Z","_content":"\n\n\n```shell\n# 安装cli\n$ npm install -g @angular/cli\n\n#创建项目\n$ ng new HelloWorld\n\n\n# 创建组件\n$ ng g component components/header\n\n\n```\n\n","source":"_posts/angular-primer.md","raw":"---\nlayout: post\ntitle: angular-primer\ndate: 2018-03-24 09:01:06\ntags: angular\n---\n\n\n\n```shell\n# 安装cli\n$ npm install -g @angular/cli\n\n#创建项目\n$ ng new HelloWorld\n\n\n# 创建组件\n$ ng g component components/header\n\n\n```\n\n","slug":"angular-primer","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymd0004fwljc3ad1clx","content":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 安装cli</span><br><span class=\"line\"><span class=\"meta\">$</span> npm install -g @angular/cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>创建项目</span><br><span class=\"line\"><span class=\"meta\">$</span> ng new HelloWorld</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 创建组件</span><br><span class=\"line\"><span class=\"meta\">$</span> ng g component components/header</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 安装cli</span><br><span class=\"line\"><span class=\"meta\">$</span> npm install -g @angular/cli</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>创建项目</span><br><span class=\"line\"><span class=\"meta\">$</span> ng new HelloWorld</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 创建组件</span><br><span class=\"line\"><span class=\"meta\">$</span> ng g component components/header</span><br></pre></td></tr></table></figure>\n"},{"layout":"post","title":"git常用命令","date":"2018-02-26T11:18:04.000Z","_content":"\n![git](https://blog.xlinyu.com/assets/images/2018-02-26/elephant-3177249_1920.jpg)\n\n<!--more-->\n\n```\n## 删除本地分支\ngit branch -d branch-name\t#删除已合并分支\ngit branch -D branch-name\t#删除未merge的分支\n\n\n## 删除远程分支\ngit branch -r -d origin/branch-name\ngit push origin :branch-name\n# 直接删除远程分支 Git v1.7.0后，支持这种语法\ngit push origin --delete <branchName>\n\n## 显示远程仓库\ngit remote show origin\n```\n\n\n\n\n\n","source":"_posts/git-command.md","raw":"---\nlayout: post\ntitle: git常用命令\ndate: 2018-02-26 19:18:04\ntags: git\n---\n\n![git](https://blog.xlinyu.com/assets/images/2018-02-26/elephant-3177249_1920.jpg)\n\n<!--more-->\n\n```\n## 删除本地分支\ngit branch -d branch-name\t#删除已合并分支\ngit branch -D branch-name\t#删除未merge的分支\n\n\n## 删除远程分支\ngit branch -r -d origin/branch-name\ngit push origin :branch-name\n# 直接删除远程分支 Git v1.7.0后，支持这种语法\ngit push origin --delete <branchName>\n\n## 显示远程仓库\ngit remote show origin\n```\n\n\n\n\n\n","slug":"git-command","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymf0005fwljet35jsqx","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/elephant-3177249_1920.jpg\" alt=\"git\"></p>\n<a id=\"more\"></a>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 删除本地分支</span><br><span class=\"line\">git branch -d branch-name\t#删除已合并分支</span><br><span class=\"line\">git branch -D branch-name\t#删除未merge的分支</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">## 删除远程分支</span><br><span class=\"line\">git branch -r -d origin/branch-name</span><br><span class=\"line\">git push origin :branch-name</span><br><span class=\"line\"># 直接删除远程分支 Git v1.7.0后，支持这种语法</span><br><span class=\"line\">git push origin --delete &lt;branchName&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">## 显示远程仓库</span><br><span class=\"line\">git remote show origin</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/elephant-3177249_1920.jpg\" alt=\"git\"></p>","more":"<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">## 删除本地分支</span><br><span class=\"line\">git branch -d branch-name\t#删除已合并分支</span><br><span class=\"line\">git branch -D branch-name\t#删除未merge的分支</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">## 删除远程分支</span><br><span class=\"line\">git branch -r -d origin/branch-name</span><br><span class=\"line\">git push origin :branch-name</span><br><span class=\"line\"># 直接删除远程分支 Git v1.7.0后，支持这种语法</span><br><span class=\"line\">git push origin --delete &lt;branchName&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">## 显示远程仓库</span><br><span class=\"line\">git remote show origin</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"docker常用操作","date":"2018-02-26T14:15:54.000Z","_content":"\n![docker](https://blog.xlinyu.com/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg)\n\n\n\ndocker run -p 8761:8761 --net=host --rm --name e2 ncc0706/eureka-server \n\n**网络**\n\n```\n# 网桥工具\n$ sudo apt-get install bridge-utils \n```\n\n<!--more-->\n\n> 参考：http://blog.csdn.net/gezhonglei2007/article/details/51627821\n\ndocker network所有子命令如下：\n\n- docker network create\n- docker network connect\n- docker network ls\n- docker network rm\n- docker network disconnect\n- docker network inspect\n```\n# 创建网卡\n# docker network create --driver=bridge --subnet=10.10.0.0/16 --gateway=10.10.0.1 global\n# docker network rm br-318641c175a7\n# docker network inspect global\n```\n\n**容器不能连接宿主机**\n\n可以通过--net=host方式启动容器\n\n进入容器后查看路由：\n\n```\n/ # route\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         192.168.163.2   0.0.0.0         UG    0      0        0 ens33\n10.10.0.0       *               255.255.0.0     U     0      0        0 br-ee8e5538ff35\n172.17.0.0      *               255.255.0.0     U     0      0        0 docker0\n172.19.0.0      *               255.255.0.0     U     0      0        0 br-5e405eb8d81c\n192.168.163.0   *               255.255.255.0   U     0      0        0 ens33\n\n# 可以看到宿主机的ip信息\n```\n\n**none镜像删除**\n\n```\ndocker ps -a | grep \"Exited\" | awk '{print $1 }'|xargs docker stop\ndocker ps -a | grep \"Exited\" | awk '{print $1 }'|xargs docker rm\ndocker images|grep none|awk '{print $3 }'|xargs docker rmi\n```","source":"_posts/docker-common.md","raw":"---\nlayout: post\ntitle: docker常用操作\ndate: 2018-02-26 22:15:54\ntags: ['docker']\n---\n\n![docker](https://blog.xlinyu.com/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg)\n\n\n\ndocker run -p 8761:8761 --net=host --rm --name e2 ncc0706/eureka-server \n\n**网络**\n\n```\n# 网桥工具\n$ sudo apt-get install bridge-utils \n```\n\n<!--more-->\n\n> 参考：http://blog.csdn.net/gezhonglei2007/article/details/51627821\n\ndocker network所有子命令如下：\n\n- docker network create\n- docker network connect\n- docker network ls\n- docker network rm\n- docker network disconnect\n- docker network inspect\n```\n# 创建网卡\n# docker network create --driver=bridge --subnet=10.10.0.0/16 --gateway=10.10.0.1 global\n# docker network rm br-318641c175a7\n# docker network inspect global\n```\n\n**容器不能连接宿主机**\n\n可以通过--net=host方式启动容器\n\n进入容器后查看路由：\n\n```\n/ # route\nKernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         192.168.163.2   0.0.0.0         UG    0      0        0 ens33\n10.10.0.0       *               255.255.0.0     U     0      0        0 br-ee8e5538ff35\n172.17.0.0      *               255.255.0.0     U     0      0        0 docker0\n172.19.0.0      *               255.255.0.0     U     0      0        0 br-5e405eb8d81c\n192.168.163.0   *               255.255.255.0   U     0      0        0 ens33\n\n# 可以看到宿主机的ip信息\n```\n\n**none镜像删除**\n\n```\ndocker ps -a | grep \"Exited\" | awk '{print $1 }'|xargs docker stop\ndocker ps -a | grep \"Exited\" | awk '{print $1 }'|xargs docker rm\ndocker images|grep none|awk '{print $3 }'|xargs docker rmi\n```","slug":"docker-common","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymh0008fwljmd4zkejx","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg\" alt=\"docker\"></p>\n<p>docker run -p 8761:8761 –net=host –rm –name e2 ncc0706/eureka-server </p>\n<p><strong>网络</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 网桥工具</span><br><span class=\"line\">$ sudo apt-get install bridge-utils</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<blockquote>\n<p>参考：<a href=\"http://blog.csdn.net/gezhonglei2007/article/details/51627821\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/gezhonglei2007/article/details/51627821</a></p>\n</blockquote>\n<p>docker network所有子命令如下：</p>\n<ul>\n<li>docker network create</li>\n<li>docker network connect</li>\n<li>docker network ls</li>\n<li>docker network rm</li>\n<li>docker network disconnect</li>\n<li>docker network inspect<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建网卡</span><br><span class=\"line\"># docker network create --driver=bridge --subnet=10.10.0.0/16 --gateway=10.10.0.1 global</span><br><span class=\"line\"># docker network rm br-318641c175a7</span><br><span class=\"line\"># docker network inspect global</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>容器不能连接宿主机</strong></p>\n<p>可以通过–net=host方式启动容器</p>\n<p>进入容器后查看路由：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/ # route</span><br><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\">default         192.168.163.2   0.0.0.0         UG    0      0        0 ens33</span><br><span class=\"line\">10.10.0.0       *               255.255.0.0     U     0      0        0 br-ee8e5538ff35</span><br><span class=\"line\">172.17.0.0      *               255.255.0.0     U     0      0        0 docker0</span><br><span class=\"line\">172.19.0.0      *               255.255.0.0     U     0      0        0 br-5e405eb8d81c</span><br><span class=\"line\">192.168.163.0   *               255.255.255.0   U     0      0        0 ens33</span><br><span class=\"line\"></span><br><span class=\"line\"># 可以看到宿主机的ip信息</span><br></pre></td></tr></table></figure>\n<p><strong>none镜像删除</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a | grep &quot;Exited&quot; | awk &apos;&#123;print $1 &#125;&apos;|xargs docker stop</span><br><span class=\"line\">docker ps -a | grep &quot;Exited&quot; | awk &apos;&#123;print $1 &#125;&apos;|xargs docker rm</span><br><span class=\"line\">docker images|grep none|awk &apos;&#123;print $3 &#125;&apos;|xargs docker rmi</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-26/golden-gate-bridge-1596161_1920.jpg\" alt=\"docker\"></p>\n<p>docker run -p 8761:8761 –net=host –rm –name e2 ncc0706/eureka-server </p>\n<p><strong>网络</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 网桥工具</span><br><span class=\"line\">$ sudo apt-get install bridge-utils</span><br></pre></td></tr></table></figure>","more":"<blockquote>\n<p>参考：<a href=\"http://blog.csdn.net/gezhonglei2007/article/details/51627821\" target=\"_blank\" rel=\"noopener\">http://blog.csdn.net/gezhonglei2007/article/details/51627821</a></p>\n</blockquote>\n<p>docker network所有子命令如下：</p>\n<ul>\n<li>docker network create</li>\n<li>docker network connect</li>\n<li>docker network ls</li>\n<li>docker network rm</li>\n<li>docker network disconnect</li>\n<li>docker network inspect<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 创建网卡</span><br><span class=\"line\"># docker network create --driver=bridge --subnet=10.10.0.0/16 --gateway=10.10.0.1 global</span><br><span class=\"line\"># docker network rm br-318641c175a7</span><br><span class=\"line\"># docker network inspect global</span><br></pre></td></tr></table></figure>\n</li>\n</ul>\n<p><strong>容器不能连接宿主机</strong></p>\n<p>可以通过–net=host方式启动容器</p>\n<p>进入容器后查看路由：</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/ # route</span><br><span class=\"line\">Kernel IP routing table</span><br><span class=\"line\">Destination     Gateway         Genmask         Flags Metric Ref    Use Iface</span><br><span class=\"line\">default         192.168.163.2   0.0.0.0         UG    0      0        0 ens33</span><br><span class=\"line\">10.10.0.0       *               255.255.0.0     U     0      0        0 br-ee8e5538ff35</span><br><span class=\"line\">172.17.0.0      *               255.255.0.0     U     0      0        0 docker0</span><br><span class=\"line\">172.19.0.0      *               255.255.0.0     U     0      0        0 br-5e405eb8d81c</span><br><span class=\"line\">192.168.163.0   *               255.255.255.0   U     0      0        0 ens33</span><br><span class=\"line\"></span><br><span class=\"line\"># 可以看到宿主机的ip信息</span><br></pre></td></tr></table></figure>\n<p><strong>none镜像删除</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker ps -a | grep &quot;Exited&quot; | awk &apos;&#123;print $1 &#125;&apos;|xargs docker stop</span><br><span class=\"line\">docker ps -a | grep &quot;Exited&quot; | awk &apos;&#123;print $1 &#125;&apos;|xargs docker rm</span><br><span class=\"line\">docker images|grep none|awk &apos;&#123;print $3 &#125;&apos;|xargs docker rmi</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"安装Alpine Linux","date":"2018-02-08T07:58:17.000Z","_content":"\n![](https://blog.xlinyu.com/assets/images/2018-02-08/201501172300446668.jpg)\n\n**下载iso**\n\n[下载地址](https://alpinelinux.org/downloads/)，创建vmware虚拟机，挂载下载的image.启动就进入登录界面了。用户名root，密码是空。（默认的）,根据提示\n\n<!-- more -->\n\n**setup-alpine**\n\n![setup-alpine](https://blog.xlinyu.com/assets/images/2018-02-08/install/setup-alpine.png)\n\n**键盘布局**\n\n![keyboard-layout](https://blog.xlinyu.com/assets/images/2018-02-08/install/keyboard-layout.png)\n\n**hostname**\n\n根据实际情况，一般默认既可\n\n**网卡配置**\n\n默认既可以\n\n**ip地址配置**\n\n可以使用dhcp，我这里使用static\n\n```shell\nip: 192.168.163.200\nnetmask: 255.255.255.0\ngateway: 192.168.163.2\n\n## 也可以安装完后手动修改\n# vim /etc/network/interfaces\n# like this\n\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n        address 192.168.163.200\n        netmask 255.255.255.0\n        gateway 192.168.163.2\n\n\n# 也可以通过setup设置\n# https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\nalpine:/bin# setup-\nsetup-acf              setup-bootable         setup-hostname         setup-mta              setup-timezone\nsetup-alpine           setup-disk             setup-interfaces       setup-ntp              setup-xen-dom0\nsetup-apkcache         setup-dns              setup-keymap           setup-proxy            setup-xorg-base\nsetup-apkrepos         setup-gparted-desktop  setup-lbu              setup-sshd\n```\n\n![ip-config](https://blog.xlinyu.com/assets/images/2018-02-08/install/ip-config.png)\n\n**配置dns、root密码**\n\n![dns](https://blog.xlinyu.com/assets/images/2018-02-08/install/dns.png)\n\n**时区配置**\n\n``Asia/Shanghai``\n\n**选择image**\n\nr: 随机的\n\nf: 在已有的选择最快的\n\ne: 手动修改配置文件\n\n也可以在系统安装完后修改\n\n![mirror](https://blog.xlinyu.com/assets/images/2018-02-08/install/mirror.png)\n\n**ssh server**\n\n服务器一般会选择安装的，默认即可\n\n![sshserver](https://blog.xlinyu.com/assets/images/2018-02-08/install/sshserver.png)\n\n**NTP默认既可**\n\n**格式化硬盘**\n\n![format](https://blog.xlinyu.com/assets/images/2018-02-08/install/format.png)\n\n**重启alpine linux**\n\n```shell\n# reboot\n```\n\n**开启root远程登陆**\n\n默认配置\n\n![default-ssh](https://blog.xlinyu.com/assets/images/2018-02-08/install/default-ssh.png)\n\n修改后配置\n\n![root-ssh](https://blog.xlinyu.com/assets/images/2018-02-08/install/root-ssh.png)\n\n```shell\n# service sshd restart\n# ssh localhost\n```\n**国内镜像配置**\n\n```shell\n# vi /etc/apk/repositories\n#/media/cdrom/apks\n#http://dl-cdn.alpinelinux.org/alpine/v3.7/main\n#http://dl-cdn.alpinelinux.org/alpine/v3.7/community\n\n#http://dl-cdn.alpinelinux.org/alpine/edge/main\n#http://dl-cdn.alpinelinux.org/alpine/edge/community\n#http://dl-cdn.alpinelinux.org/alpine/edge/testing\n# 清华mirror\nhttps://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/main\nhttps://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/community\n\n\n# 更新源信息\n# apk add --update\n```\n\n```shell\n# 防火墙的配置\n# /etc/init.d/iptables save\n\n```\n\n\n\n\n> https://wiki.alpinelinux.org/wiki/Main_Page\n>\n> https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\n>\n> https://www.youtube.com/watch?v=1G4nmUUk2kI\n>\n> https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&mid=2247483953&idx=1&sn=c0790b2d73bcd047f8a84d604fc24a8a&chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd\n\n\n\n\n\n","source":"_posts/install-alpine-linux.md","raw":"---\nlayout: post\ntitle: 安装Alpine Linux\ndate: 2018-02-08 15:58:17\ntags: alpine\n---\n\n![](https://blog.xlinyu.com/assets/images/2018-02-08/201501172300446668.jpg)\n\n**下载iso**\n\n[下载地址](https://alpinelinux.org/downloads/)，创建vmware虚拟机，挂载下载的image.启动就进入登录界面了。用户名root，密码是空。（默认的）,根据提示\n\n<!-- more -->\n\n**setup-alpine**\n\n![setup-alpine](https://blog.xlinyu.com/assets/images/2018-02-08/install/setup-alpine.png)\n\n**键盘布局**\n\n![keyboard-layout](https://blog.xlinyu.com/assets/images/2018-02-08/install/keyboard-layout.png)\n\n**hostname**\n\n根据实际情况，一般默认既可\n\n**网卡配置**\n\n默认既可以\n\n**ip地址配置**\n\n可以使用dhcp，我这里使用static\n\n```shell\nip: 192.168.163.200\nnetmask: 255.255.255.0\ngateway: 192.168.163.2\n\n## 也可以安装完后手动修改\n# vim /etc/network/interfaces\n# like this\n\nauto lo\niface lo inet loopback\n\nauto eth0\niface eth0 inet static\n        address 192.168.163.200\n        netmask 255.255.255.0\n        gateway 192.168.163.2\n\n\n# 也可以通过setup设置\n# https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\nalpine:/bin# setup-\nsetup-acf              setup-bootable         setup-hostname         setup-mta              setup-timezone\nsetup-alpine           setup-disk             setup-interfaces       setup-ntp              setup-xen-dom0\nsetup-apkcache         setup-dns              setup-keymap           setup-proxy            setup-xorg-base\nsetup-apkrepos         setup-gparted-desktop  setup-lbu              setup-sshd\n```\n\n![ip-config](https://blog.xlinyu.com/assets/images/2018-02-08/install/ip-config.png)\n\n**配置dns、root密码**\n\n![dns](https://blog.xlinyu.com/assets/images/2018-02-08/install/dns.png)\n\n**时区配置**\n\n``Asia/Shanghai``\n\n**选择image**\n\nr: 随机的\n\nf: 在已有的选择最快的\n\ne: 手动修改配置文件\n\n也可以在系统安装完后修改\n\n![mirror](https://blog.xlinyu.com/assets/images/2018-02-08/install/mirror.png)\n\n**ssh server**\n\n服务器一般会选择安装的，默认即可\n\n![sshserver](https://blog.xlinyu.com/assets/images/2018-02-08/install/sshserver.png)\n\n**NTP默认既可**\n\n**格式化硬盘**\n\n![format](https://blog.xlinyu.com/assets/images/2018-02-08/install/format.png)\n\n**重启alpine linux**\n\n```shell\n# reboot\n```\n\n**开启root远程登陆**\n\n默认配置\n\n![default-ssh](https://blog.xlinyu.com/assets/images/2018-02-08/install/default-ssh.png)\n\n修改后配置\n\n![root-ssh](https://blog.xlinyu.com/assets/images/2018-02-08/install/root-ssh.png)\n\n```shell\n# service sshd restart\n# ssh localhost\n```\n**国内镜像配置**\n\n```shell\n# vi /etc/apk/repositories\n#/media/cdrom/apks\n#http://dl-cdn.alpinelinux.org/alpine/v3.7/main\n#http://dl-cdn.alpinelinux.org/alpine/v3.7/community\n\n#http://dl-cdn.alpinelinux.org/alpine/edge/main\n#http://dl-cdn.alpinelinux.org/alpine/edge/community\n#http://dl-cdn.alpinelinux.org/alpine/edge/testing\n# 清华mirror\nhttps://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/main\nhttps://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/community\n\n\n# 更新源信息\n# apk add --update\n```\n\n```shell\n# 防火墙的配置\n# /etc/init.d/iptables save\n\n```\n\n\n\n\n> https://wiki.alpinelinux.org/wiki/Main_Page\n>\n> https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\n>\n> https://www.youtube.com/watch?v=1G4nmUUk2kI\n>\n> https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&mid=2247483953&idx=1&sn=c0790b2d73bcd047f8a84d604fc24a8a&chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd\n\n\n\n\n\n","slug":"install-alpine-linux","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymj0009fwlj2smgebeo","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/201501172300446668.jpg\" alt=\"\"></p>\n<p><strong>下载iso</strong></p>\n<p><a href=\"https://alpinelinux.org/downloads/\" target=\"_blank\" rel=\"noopener\">下载地址</a>，创建vmware虚拟机，挂载下载的image.启动就进入登录界面了。用户名root，密码是空。（默认的）,根据提示</p>\n<a id=\"more\"></a>\n<p><strong>setup-alpine</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/setup-alpine.png\" alt=\"setup-alpine\"></p>\n<p><strong>键盘布局</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/keyboard-layout.png\" alt=\"keyboard-layout\"></p>\n<p><strong>hostname</strong></p>\n<p>根据实际情况，一般默认既可</p>\n<p><strong>网卡配置</strong></p>\n<p>默认既可以</p>\n<p><strong>ip地址配置</strong></p>\n<p>可以使用dhcp，我这里使用static</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip: 192.168.163.200</span><br><span class=\"line\">netmask: 255.255.255.0</span><br><span class=\"line\">gateway: 192.168.163.2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span># 也可以安装完后手动修改</span><br><span class=\"line\"><span class=\"meta\">#</span> vim /etc/network/interfaces</span><br><span class=\"line\"><span class=\"meta\">#</span> like this</span><br><span class=\"line\"></span><br><span class=\"line\">auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\"></span><br><span class=\"line\">auto eth0</span><br><span class=\"line\">iface eth0 inet static</span><br><span class=\"line\">        address 192.168.163.200</span><br><span class=\"line\">        netmask 255.255.255.0</span><br><span class=\"line\">        gateway 192.168.163.2</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 也可以通过setup设置</span><br><span class=\"line\"><span class=\"meta\">#</span> https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</span><br><span class=\"line\">alpine:/bin# setup-</span><br><span class=\"line\">setup-acf              setup-bootable         setup-hostname         setup-mta              setup-timezone</span><br><span class=\"line\">setup-alpine           setup-disk             setup-interfaces       setup-ntp              setup-xen-dom0</span><br><span class=\"line\">setup-apkcache         setup-dns              setup-keymap           setup-proxy            setup-xorg-base</span><br><span class=\"line\">setup-apkrepos         setup-gparted-desktop  setup-lbu              setup-sshd</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/ip-config.png\" alt=\"ip-config\"></p>\n<p><strong>配置dns、root密码</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/dns.png\" alt=\"dns\"></p>\n<p><strong>时区配置</strong></p>\n<p><code>Asia/Shanghai</code></p>\n<p><strong>选择image</strong></p>\n<p>r: 随机的</p>\n<p>f: 在已有的选择最快的</p>\n<p>e: 手动修改配置文件</p>\n<p>也可以在系统安装完后修改</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/mirror.png\" alt=\"mirror\"></p>\n<p><strong>ssh server</strong></p>\n<p>服务器一般会选择安装的，默认即可</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/sshserver.png\" alt=\"sshserver\"></p>\n<p><strong>NTP默认既可</strong></p>\n<p><strong>格式化硬盘</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/format.png\" alt=\"format\"></p>\n<p><strong>重启alpine linux</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> reboot</span><br></pre></td></tr></table></figure>\n<p><strong>开启root远程登陆</strong></p>\n<p>默认配置</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/default-ssh.png\" alt=\"default-ssh\"></p>\n<p>修改后配置</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/root-ssh.png\" alt=\"root-ssh\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> service sshd restart</span><br><span class=\"line\"><span class=\"meta\">#</span> ssh localhost</span><br></pre></td></tr></table></figure>\n<p><strong>国内镜像配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> vi /etc/apk/repositories</span><br><span class=\"line\"><span class=\"meta\">#</span>/media/cdrom/apks</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/v3.7/main</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/v3.7/community</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/main</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/community</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/testing</span><br><span class=\"line\"><span class=\"meta\">#</span> 清华mirror</span><br><span class=\"line\">https://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/main</span><br><span class=\"line\">https://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/community</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 更新源信息</span><br><span class=\"line\"><span class=\"meta\">#</span> apk add --update</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 防火墙的配置</span><br><span class=\"line\"><span class=\"meta\">#</span> /etc/init.d/iptables save</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Main_Page\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Main_Page</a></p>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=1G4nmUUk2kI\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=1G4nmUUk2kI</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&amp;mid=2247483953&amp;idx=1&amp;sn=c0790b2d73bcd047f8a84d604fc24a8a&amp;chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd\" target=\"_blank\" rel=\"noopener\">https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&amp;mid=2247483953&amp;idx=1&amp;sn=c0790b2d73bcd047f8a84d604fc24a8a&amp;chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/201501172300446668.jpg\" alt=\"\"></p>\n<p><strong>下载iso</strong></p>\n<p><a href=\"https://alpinelinux.org/downloads/\" target=\"_blank\" rel=\"noopener\">下载地址</a>，创建vmware虚拟机，挂载下载的image.启动就进入登录界面了。用户名root，密码是空。（默认的）,根据提示</p>","more":"<p><strong>setup-alpine</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/setup-alpine.png\" alt=\"setup-alpine\"></p>\n<p><strong>键盘布局</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/keyboard-layout.png\" alt=\"keyboard-layout\"></p>\n<p><strong>hostname</strong></p>\n<p>根据实际情况，一般默认既可</p>\n<p><strong>网卡配置</strong></p>\n<p>默认既可以</p>\n<p><strong>ip地址配置</strong></p>\n<p>可以使用dhcp，我这里使用static</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ip: 192.168.163.200</span><br><span class=\"line\">netmask: 255.255.255.0</span><br><span class=\"line\">gateway: 192.168.163.2</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span># 也可以安装完后手动修改</span><br><span class=\"line\"><span class=\"meta\">#</span> vim /etc/network/interfaces</span><br><span class=\"line\"><span class=\"meta\">#</span> like this</span><br><span class=\"line\"></span><br><span class=\"line\">auto lo</span><br><span class=\"line\">iface lo inet loopback</span><br><span class=\"line\"></span><br><span class=\"line\">auto eth0</span><br><span class=\"line\">iface eth0 inet static</span><br><span class=\"line\">        address 192.168.163.200</span><br><span class=\"line\">        netmask 255.255.255.0</span><br><span class=\"line\">        gateway 192.168.163.2</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 也可以通过setup设置</span><br><span class=\"line\"><span class=\"meta\">#</span> https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</span><br><span class=\"line\">alpine:/bin# setup-</span><br><span class=\"line\">setup-acf              setup-bootable         setup-hostname         setup-mta              setup-timezone</span><br><span class=\"line\">setup-alpine           setup-disk             setup-interfaces       setup-ntp              setup-xen-dom0</span><br><span class=\"line\">setup-apkcache         setup-dns              setup-keymap           setup-proxy            setup-xorg-base</span><br><span class=\"line\">setup-apkrepos         setup-gparted-desktop  setup-lbu              setup-sshd</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/ip-config.png\" alt=\"ip-config\"></p>\n<p><strong>配置dns、root密码</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/dns.png\" alt=\"dns\"></p>\n<p><strong>时区配置</strong></p>\n<p><code>Asia/Shanghai</code></p>\n<p><strong>选择image</strong></p>\n<p>r: 随机的</p>\n<p>f: 在已有的选择最快的</p>\n<p>e: 手动修改配置文件</p>\n<p>也可以在系统安装完后修改</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/mirror.png\" alt=\"mirror\"></p>\n<p><strong>ssh server</strong></p>\n<p>服务器一般会选择安装的，默认即可</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/sshserver.png\" alt=\"sshserver\"></p>\n<p><strong>NTP默认既可</strong></p>\n<p><strong>格式化硬盘</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/format.png\" alt=\"format\"></p>\n<p><strong>重启alpine linux</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> reboot</span><br></pre></td></tr></table></figure>\n<p><strong>开启root远程登陆</strong></p>\n<p>默认配置</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/default-ssh.png\" alt=\"default-ssh\"></p>\n<p>修改后配置</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-08/install/root-ssh.png\" alt=\"root-ssh\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> service sshd restart</span><br><span class=\"line\"><span class=\"meta\">#</span> ssh localhost</span><br></pre></td></tr></table></figure>\n<p><strong>国内镜像配置</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> vi /etc/apk/repositories</span><br><span class=\"line\"><span class=\"meta\">#</span>/media/cdrom/apks</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/v3.7/main</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/v3.7/community</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/main</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/community</span><br><span class=\"line\"><span class=\"meta\">#</span>http://dl-cdn.alpinelinux.org/alpine/edge/testing</span><br><span class=\"line\"><span class=\"meta\">#</span> 清华mirror</span><br><span class=\"line\">https://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/main</span><br><span class=\"line\">https://mirror.tuna.tsinghua.edu.cn/alpine/v3.7/community</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 更新源信息</span><br><span class=\"line\"><span class=\"meta\">#</span> apk add --update</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 防火墙的配置</span><br><span class=\"line\"><span class=\"meta\">#</span> /etc/init.d/iptables save</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Main_Page\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Main_Page</a></p>\n<p><a href=\"https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts\" target=\"_blank\" rel=\"noopener\">https://wiki.alpinelinux.org/wiki/Alpine_setup_scripts</a></p>\n<p><a href=\"https://www.youtube.com/watch?v=1G4nmUUk2kI\" target=\"_blank\" rel=\"noopener\">https://www.youtube.com/watch?v=1G4nmUUk2kI</a></p>\n<p><a href=\"https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&amp;mid=2247483953&amp;idx=1&amp;sn=c0790b2d73bcd047f8a84d604fc24a8a&amp;chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd\" target=\"_blank\" rel=\"noopener\">https://mp.weixin.qq.com/s?__biz=MzI2MDY5Mzc0Ng==&amp;mid=2247483953&amp;idx=1&amp;sn=c0790b2d73bcd047f8a84d604fc24a8a&amp;chksm=ea6489acdd1300ba092c85b54ccecb417e3c28127ec9a7c280325af4b8737b74c29888c2081a#rd</a></p>\n</blockquote>"},{"layout":"post","title":"install-docker-on-alpine-linux","date":"2018-03-24T11:46:23.000Z","_content":"\n![docker on alpine linux](https://blog.xlinyu.com/assets/images/2018-03-25/01.jpg)\n\n> http://wiki.alpinelinux.org/wiki/Docker\n\n\n\n```shell\n# 删除旧版本的docker\n➜  ~ apk del docker\n➜  ~  rm -rf /etc/docker /var/lib/docker /var/run/docker\n```\n\n<!--more-->\n\n```shell\n# 如果没有docker的安装包，需要将community地址添加到 /etc/apk/repositories \n➜  ~ apk add docker\n(1/8) Installing libmnl (1.0.4-r0)\n(2/8) Installing jansson (2.10-r0)\n(3/8) Installing libnftnl-libs (1.0.8-r1)\n(4/8) Installing iptables (1.6.1-r1)\n(5/8) Installing libltdl (2.4.6-r4)\n(6/8) Installing libseccomp (2.3.2-r1)\n(7/8) Installing docker (17.12.1-r0)\nExecuting docker-17.12.1-r0.pre-install\n(8/8) Installing docker-zsh-completion (17.12.1-r0)\nExecuting busybox-1.27.2-r8.trigger\nOK: 710 MiB in 65 packages\n\n# 启动服务\n➜  ~ rc-service docker start\n * /var/log/docker.log: creating file\n * /var/log/docker.log: correcting mode\n * /var/log/docker.log: correcting owner\n * Starting docker ...                                                                                                         [ ok ]\n# 验证服务是否启动 \n# 也可以\n# docker info \n➜  ~ docker version\nClient:\n Version:       17.12.1-ce\n API version:   1.35\n Go version:    go1.9.4\n Git commit:    9584b2309e\n Built: Wed Mar  7 13:17:02 2018\n OS/Arch:       linux/amd64\n\nServer:\n Engine:\n  Version:      17.12.1-ce\n  API version:  1.35 (minimum version 1.12)\n  Go version:   go1.9.4\n  Git commit:   v17.12.1-ce\n  Built:        Wed Mar  7 13:16:22 2018\n  OS/Arch:      linux/amd64\n  Experimental: false\n➜  ~ rc-update add docker boot\n * service docker added to runlevel boot\n\n# 服务启动加载的脚本\n➜  ~ rc-service -r docker\n/etc/init.d/docker\n```\n\n**开启远程api及配置国内镜像**\n\n```shell\n➜  ~ vim /etc/conf.d/docker\n```\nDOCKER_OPTS默认为空值\n```shell\n# /etc/conf.d/docker: config file for /etc/init.d/docker\n  \n# where the docker daemon output gets piped\n# this contains both stdout and stderr. If  you need to separate them,\n# see the settings below\n#DOCKER_LOGFILE=\"/var/log/docker.log\"\n\n# where the docker daemon stdout gets piped\n# if this is not set, DOCKER_LOGFILE is used\n#DOCKER_OUTFILE=\"/var/log/docker-out.log\"\n\n# where the docker daemon stderr gets piped\n# if this is not set, DOCKER_LOGFILE is used\n#DOCKER_ERRFILE=\"/var/log/docker-err.log\"\n\n# where docker's pid get stored\n#DOCKER_PIDFILE=\"/run/docker.pid\"\n\n# where the docker daemon itself is run from\n#DOCKERD_BINARY=\"/usr/bin/dockerd\"\n\n# any other random options you want to pass to docker\nDOCKER_OPTS=\"-H 0.0.0.0:2375 -H unix:///var/run/docker.sock --registry-mirror=http://xxxx.m.daocloud.io\"\n\n# disable grsecurity features\n#disable_grsec=\"chroot_deny_chmod chroot_deny_mknod\"\n```\n\n重启docker服务，可以远程telnet一下docker的2375端口试试\n\n```shell\n➜  ~ service docker restart\n * WARNING: you are stopping a boot service\n * Stopping docker ...                                                                                                         [ ok ]\n * Starting docker ...                                                                                                         [ ok ]\n➜  ~ telnet 192.168.163.200 2375\n\nHTTP/1.1 400 Bad Request\nContent-Type: text/plain; charset=utf-8\nConnection: close\n\n400 Bad RequestConnection closed by foreign host\n➜  ~ \n```\n\n\n\n\n\n\n\n","source":"_posts/install-docker-on-alpine-linux.md","raw":"---\nlayout: post\ntitle: install-docker-on-alpine-linux\ndate: 2018-03-24 19:46:23\ntags: docker alpine\n---\n\n![docker on alpine linux](https://blog.xlinyu.com/assets/images/2018-03-25/01.jpg)\n\n> http://wiki.alpinelinux.org/wiki/Docker\n\n\n\n```shell\n# 删除旧版本的docker\n➜  ~ apk del docker\n➜  ~  rm -rf /etc/docker /var/lib/docker /var/run/docker\n```\n\n<!--more-->\n\n```shell\n# 如果没有docker的安装包，需要将community地址添加到 /etc/apk/repositories \n➜  ~ apk add docker\n(1/8) Installing libmnl (1.0.4-r0)\n(2/8) Installing jansson (2.10-r0)\n(3/8) Installing libnftnl-libs (1.0.8-r1)\n(4/8) Installing iptables (1.6.1-r1)\n(5/8) Installing libltdl (2.4.6-r4)\n(6/8) Installing libseccomp (2.3.2-r1)\n(7/8) Installing docker (17.12.1-r0)\nExecuting docker-17.12.1-r0.pre-install\n(8/8) Installing docker-zsh-completion (17.12.1-r0)\nExecuting busybox-1.27.2-r8.trigger\nOK: 710 MiB in 65 packages\n\n# 启动服务\n➜  ~ rc-service docker start\n * /var/log/docker.log: creating file\n * /var/log/docker.log: correcting mode\n * /var/log/docker.log: correcting owner\n * Starting docker ...                                                                                                         [ ok ]\n# 验证服务是否启动 \n# 也可以\n# docker info \n➜  ~ docker version\nClient:\n Version:       17.12.1-ce\n API version:   1.35\n Go version:    go1.9.4\n Git commit:    9584b2309e\n Built: Wed Mar  7 13:17:02 2018\n OS/Arch:       linux/amd64\n\nServer:\n Engine:\n  Version:      17.12.1-ce\n  API version:  1.35 (minimum version 1.12)\n  Go version:   go1.9.4\n  Git commit:   v17.12.1-ce\n  Built:        Wed Mar  7 13:16:22 2018\n  OS/Arch:      linux/amd64\n  Experimental: false\n➜  ~ rc-update add docker boot\n * service docker added to runlevel boot\n\n# 服务启动加载的脚本\n➜  ~ rc-service -r docker\n/etc/init.d/docker\n```\n\n**开启远程api及配置国内镜像**\n\n```shell\n➜  ~ vim /etc/conf.d/docker\n```\nDOCKER_OPTS默认为空值\n```shell\n# /etc/conf.d/docker: config file for /etc/init.d/docker\n  \n# where the docker daemon output gets piped\n# this contains both stdout and stderr. If  you need to separate them,\n# see the settings below\n#DOCKER_LOGFILE=\"/var/log/docker.log\"\n\n# where the docker daemon stdout gets piped\n# if this is not set, DOCKER_LOGFILE is used\n#DOCKER_OUTFILE=\"/var/log/docker-out.log\"\n\n# where the docker daemon stderr gets piped\n# if this is not set, DOCKER_LOGFILE is used\n#DOCKER_ERRFILE=\"/var/log/docker-err.log\"\n\n# where docker's pid get stored\n#DOCKER_PIDFILE=\"/run/docker.pid\"\n\n# where the docker daemon itself is run from\n#DOCKERD_BINARY=\"/usr/bin/dockerd\"\n\n# any other random options you want to pass to docker\nDOCKER_OPTS=\"-H 0.0.0.0:2375 -H unix:///var/run/docker.sock --registry-mirror=http://xxxx.m.daocloud.io\"\n\n# disable grsecurity features\n#disable_grsec=\"chroot_deny_chmod chroot_deny_mknod\"\n```\n\n重启docker服务，可以远程telnet一下docker的2375端口试试\n\n```shell\n➜  ~ service docker restart\n * WARNING: you are stopping a boot service\n * Stopping docker ...                                                                                                         [ ok ]\n * Starting docker ...                                                                                                         [ ok ]\n➜  ~ telnet 192.168.163.200 2375\n\nHTTP/1.1 400 Bad Request\nContent-Type: text/plain; charset=utf-8\nConnection: close\n\n400 Bad RequestConnection closed by foreign host\n➜  ~ \n```\n\n\n\n\n\n\n\n","slug":"install-docker-on-alpine-linux","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymm000bfwlje7to3vdd","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/01.jpg\" alt=\"docker on alpine linux\"></p>\n<blockquote>\n<p><a href=\"http://wiki.alpinelinux.org/wiki/Docker\" target=\"_blank\" rel=\"noopener\">http://wiki.alpinelinux.org/wiki/Docker</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 删除旧版本的docker</span><br><span class=\"line\">➜  ~ apk del docker</span><br><span class=\"line\">➜  ~  rm -rf /etc/docker /var/lib/docker /var/run/docker</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 如果没有docker的安装包，需要将community地址添加到 /etc/apk/repositories </span><br><span class=\"line\">➜  ~ apk add docker</span><br><span class=\"line\">(1/8) Installing libmnl (1.0.4-r0)</span><br><span class=\"line\">(2/8) Installing jansson (2.10-r0)</span><br><span class=\"line\">(3/8) Installing libnftnl-libs (1.0.8-r1)</span><br><span class=\"line\">(4/8) Installing iptables (1.6.1-r1)</span><br><span class=\"line\">(5/8) Installing libltdl (2.4.6-r4)</span><br><span class=\"line\">(6/8) Installing libseccomp (2.3.2-r1)</span><br><span class=\"line\">(7/8) Installing docker (17.12.1-r0)</span><br><span class=\"line\">Executing docker-17.12.1-r0.pre-install</span><br><span class=\"line\">(8/8) Installing docker-zsh-completion (17.12.1-r0)</span><br><span class=\"line\">Executing busybox-1.27.2-r8.trigger</span><br><span class=\"line\">OK: 710 MiB in 65 packages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 启动服务</span><br><span class=\"line\">➜  ~ rc-service docker start</span><br><span class=\"line\"> * /var/log/docker.log: creating file</span><br><span class=\"line\"> * /var/log/docker.log: correcting mode</span><br><span class=\"line\"> * /var/log/docker.log: correcting owner</span><br><span class=\"line\"> * Starting docker ...                                                                                                         [ ok ]</span><br><span class=\"line\"><span class=\"meta\">#</span> 验证服务是否启动 </span><br><span class=\"line\"><span class=\"meta\">#</span> 也可以</span><br><span class=\"line\"><span class=\"meta\">#</span> docker info </span><br><span class=\"line\">➜  ~ docker version</span><br><span class=\"line\">Client:</span><br><span class=\"line\"> Version:       17.12.1-ce</span><br><span class=\"line\"> API version:   1.35</span><br><span class=\"line\"> Go version:    go1.9.4</span><br><span class=\"line\"> Git commit:    9584b2309e</span><br><span class=\"line\"> Built: Wed Mar  7 13:17:02 2018</span><br><span class=\"line\"> OS/Arch:       linux/amd64</span><br><span class=\"line\"></span><br><span class=\"line\">Server:</span><br><span class=\"line\"> Engine:</span><br><span class=\"line\">  Version:      17.12.1-ce</span><br><span class=\"line\">  API version:  1.35 (minimum version 1.12)</span><br><span class=\"line\">  Go version:   go1.9.4</span><br><span class=\"line\">  Git commit:   v17.12.1-ce</span><br><span class=\"line\">  Built:        Wed Mar  7 13:16:22 2018</span><br><span class=\"line\">  OS/Arch:      linux/amd64</span><br><span class=\"line\">  Experimental: false</span><br><span class=\"line\">➜  ~ rc-update add docker boot</span><br><span class=\"line\"> * service docker added to runlevel boot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 服务启动加载的脚本</span><br><span class=\"line\">➜  ~ rc-service -r docker</span><br><span class=\"line\">/etc/init.d/docker</span><br></pre></td></tr></table></figure>\n<p><strong>开启远程api及配置国内镜像</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ vim /etc/conf.d/docker</span><br></pre></td></tr></table></figure>\n<p>DOCKER_OPTS默认为空值<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> /etc/conf.d/docker: config file for /etc/init.d/docker</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon output gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> this contains both stdout and stderr. If  you need to separate them,</span><br><span class=\"line\"><span class=\"meta\">#</span> see the settings below</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_LOGFILE=\"/var/log/docker.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon stdout gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> if this is not set, DOCKER_LOGFILE is used</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_OUTFILE=\"/var/log/docker-out.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon stderr gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> if this is not set, DOCKER_LOGFILE is used</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_ERRFILE=\"/var/log/docker-err.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where docker's pid get stored</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_PIDFILE=\"/run/docker.pid\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon itself is run from</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKERD_BINARY=\"/usr/bin/dockerd\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> any other random options you want to pass to docker</span><br><span class=\"line\">DOCKER_OPTS=\"-H 0.0.0.0:2375 -H unix:///var/run/docker.sock --registry-mirror=http://xxxx.m.daocloud.io\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> disable grsecurity features</span><br><span class=\"line\"><span class=\"meta\">#</span>disable_grsec=\"chroot_deny_chmod chroot_deny_mknod\"</span><br></pre></td></tr></table></figure></p>\n<p>重启docker服务，可以远程telnet一下docker的2375端口试试</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ service docker restart</span><br><span class=\"line\"> * WARNING: you are stopping a boot service</span><br><span class=\"line\"> * Stopping docker ...                                                                                                         [ ok ]</span><br><span class=\"line\"> * Starting docker ...                                                                                                         [ ok ]</span><br><span class=\"line\">➜  ~ telnet 192.168.163.200 2375</span><br><span class=\"line\"></span><br><span class=\"line\">HTTP/1.1 400 Bad Request</span><br><span class=\"line\">Content-Type: text/plain; charset=utf-8</span><br><span class=\"line\">Connection: close</span><br><span class=\"line\"></span><br><span class=\"line\">400 Bad RequestConnection closed by foreign host</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/01.jpg\" alt=\"docker on alpine linux\"></p>\n<blockquote>\n<p><a href=\"http://wiki.alpinelinux.org/wiki/Docker\" target=\"_blank\" rel=\"noopener\">http://wiki.alpinelinux.org/wiki/Docker</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 删除旧版本的docker</span><br><span class=\"line\">➜  ~ apk del docker</span><br><span class=\"line\">➜  ~  rm -rf /etc/docker /var/lib/docker /var/run/docker</span><br></pre></td></tr></table></figure>","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> 如果没有docker的安装包，需要将community地址添加到 /etc/apk/repositories </span><br><span class=\"line\">➜  ~ apk add docker</span><br><span class=\"line\">(1/8) Installing libmnl (1.0.4-r0)</span><br><span class=\"line\">(2/8) Installing jansson (2.10-r0)</span><br><span class=\"line\">(3/8) Installing libnftnl-libs (1.0.8-r1)</span><br><span class=\"line\">(4/8) Installing iptables (1.6.1-r1)</span><br><span class=\"line\">(5/8) Installing libltdl (2.4.6-r4)</span><br><span class=\"line\">(6/8) Installing libseccomp (2.3.2-r1)</span><br><span class=\"line\">(7/8) Installing docker (17.12.1-r0)</span><br><span class=\"line\">Executing docker-17.12.1-r0.pre-install</span><br><span class=\"line\">(8/8) Installing docker-zsh-completion (17.12.1-r0)</span><br><span class=\"line\">Executing busybox-1.27.2-r8.trigger</span><br><span class=\"line\">OK: 710 MiB in 65 packages</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 启动服务</span><br><span class=\"line\">➜  ~ rc-service docker start</span><br><span class=\"line\"> * /var/log/docker.log: creating file</span><br><span class=\"line\"> * /var/log/docker.log: correcting mode</span><br><span class=\"line\"> * /var/log/docker.log: correcting owner</span><br><span class=\"line\"> * Starting docker ...                                                                                                         [ ok ]</span><br><span class=\"line\"><span class=\"meta\">#</span> 验证服务是否启动 </span><br><span class=\"line\"><span class=\"meta\">#</span> 也可以</span><br><span class=\"line\"><span class=\"meta\">#</span> docker info </span><br><span class=\"line\">➜  ~ docker version</span><br><span class=\"line\">Client:</span><br><span class=\"line\"> Version:       17.12.1-ce</span><br><span class=\"line\"> API version:   1.35</span><br><span class=\"line\"> Go version:    go1.9.4</span><br><span class=\"line\"> Git commit:    9584b2309e</span><br><span class=\"line\"> Built: Wed Mar  7 13:17:02 2018</span><br><span class=\"line\"> OS/Arch:       linux/amd64</span><br><span class=\"line\"></span><br><span class=\"line\">Server:</span><br><span class=\"line\"> Engine:</span><br><span class=\"line\">  Version:      17.12.1-ce</span><br><span class=\"line\">  API version:  1.35 (minimum version 1.12)</span><br><span class=\"line\">  Go version:   go1.9.4</span><br><span class=\"line\">  Git commit:   v17.12.1-ce</span><br><span class=\"line\">  Built:        Wed Mar  7 13:16:22 2018</span><br><span class=\"line\">  OS/Arch:      linux/amd64</span><br><span class=\"line\">  Experimental: false</span><br><span class=\"line\">➜  ~ rc-update add docker boot</span><br><span class=\"line\"> * service docker added to runlevel boot</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> 服务启动加载的脚本</span><br><span class=\"line\">➜  ~ rc-service -r docker</span><br><span class=\"line\">/etc/init.d/docker</span><br></pre></td></tr></table></figure>\n<p><strong>开启远程api及配置国内镜像</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ vim /etc/conf.d/docker</span><br></pre></td></tr></table></figure>\n<p>DOCKER_OPTS默认为空值<br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span> /etc/conf.d/docker: config file for /etc/init.d/docker</span><br><span class=\"line\">  </span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon output gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> this contains both stdout and stderr. If  you need to separate them,</span><br><span class=\"line\"><span class=\"meta\">#</span> see the settings below</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_LOGFILE=\"/var/log/docker.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon stdout gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> if this is not set, DOCKER_LOGFILE is used</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_OUTFILE=\"/var/log/docker-out.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon stderr gets piped</span><br><span class=\"line\"><span class=\"meta\">#</span> if this is not set, DOCKER_LOGFILE is used</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_ERRFILE=\"/var/log/docker-err.log\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where docker's pid get stored</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKER_PIDFILE=\"/run/docker.pid\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> where the docker daemon itself is run from</span><br><span class=\"line\"><span class=\"meta\">#</span>DOCKERD_BINARY=\"/usr/bin/dockerd\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> any other random options you want to pass to docker</span><br><span class=\"line\">DOCKER_OPTS=\"-H 0.0.0.0:2375 -H unix:///var/run/docker.sock --registry-mirror=http://xxxx.m.daocloud.io\"</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span> disable grsecurity features</span><br><span class=\"line\"><span class=\"meta\">#</span>disable_grsec=\"chroot_deny_chmod chroot_deny_mknod\"</span><br></pre></td></tr></table></figure></p>\n<p>重启docker服务，可以远程telnet一下docker的2375端口试试</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ service docker restart</span><br><span class=\"line\"> * WARNING: you are stopping a boot service</span><br><span class=\"line\"> * Stopping docker ...                                                                                                         [ ok ]</span><br><span class=\"line\"> * Starting docker ...                                                                                                         [ ok ]</span><br><span class=\"line\">➜  ~ telnet 192.168.163.200 2375</span><br><span class=\"line\"></span><br><span class=\"line\">HTTP/1.1 400 Bad Request</span><br><span class=\"line\">Content-Type: text/plain; charset=utf-8</span><br><span class=\"line\">Connection: close</span><br><span class=\"line\"></span><br><span class=\"line\">400 Bad RequestConnection closed by foreign host</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>"},{"title":"Hello World","date":"2018-02-05T14:11:29.000Z","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n![hello-world](https://blog.xlinyu.com/assets/images/2018-02-05/2015011809285211521.jpg)\n\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\ndate: 2018-02-05 22:11:29\ntags: hexo\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n![hello-world](https://blog.xlinyu.com/assets/images/2018-02-05/2015011809285211521.jpg)\n\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjjo12ymo000dfwljufriqchj","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-05/2015011809285211521.jpg\" alt=\"hello-world\"></p>\n<a id=\"more\"></a>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{}},"excerpt":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-05/2015011809285211521.jpg\" alt=\"hello-world\"></p>","more":"<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>"},{"layout":"post","title":"install zsh on ubuntu or alpine","date":"2018-02-09T14:38:11.000Z","_content":"\n![](https://blog.xlinyu.com/assets/images/2018-02-09/seashell-3043735_1920.jpg)\n\n> 官网地址：[https://ohmyz.sh/](https://ohmyz.sh/)\n>\n> wiki: [https://github.com/robbyrussell/oh-my-zsh/wiki](https://github.com/robbyrussell/oh-my-zsh/wiki)\n\n<!-- more -->\n\n**安装zsh**\n\n```shell\n# ubuntu linux\n$ sudo apt-get install -y zsh curl wget git\n\n# alpine linux\n# apk add zsh curl wget git\n```\n\n**参照官网**\n\n```shell\n# Via curl\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n# Via wget\n# sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n```\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/20180209224814.png)\n\n**改变当前用户的shell**\n\n```shell\n# ubuntu linux\n$ sudo usermod -s /bin/zsh $USER\n$ exit\n\n# alpine linux\n# sed -i -e \"s/bin\\/ash/bin\\/zsh/\" /etc/passwd\n# exit\n```\n\n**重新登陆shell**\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/20180209225531.png)\n\n### 关于环境变量的问题\n\n> [https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu](https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu)\n>\n> The manual page zsh(1) states that zsh reads /etc/zsh/zprofile. You could simply add a command there \n>\n> which sources /etc/profile\n>\n> $ sudo vim /etc/zsh/zprofile\n>\n> \\# add source\n>\n> source /etc/profile\n>\n> exit\n>\n> login\n>\n> ok.....very tanks","source":"_posts/install-zsh-on-ubuntu-alpine.md","raw":"---\nlayout: post\ntitle: install zsh on ubuntu or alpine\ndate: 2018-02-09 22:38:11\ntags: ['zsh', 'bash', 'shell']\n---\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/seashell-3043735_1920.jpg)\n\n> 官网地址：[https://ohmyz.sh/](https://ohmyz.sh/)\n>\n> wiki: [https://github.com/robbyrussell/oh-my-zsh/wiki](https://github.com/robbyrussell/oh-my-zsh/wiki)\n\n<!-- more -->\n\n**安装zsh**\n\n```shell\n# ubuntu linux\n$ sudo apt-get install -y zsh curl wget git\n\n# alpine linux\n# apk add zsh curl wget git\n```\n\n**参照官网**\n\n```shell\n# Via curl\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n# Via wget\n# sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n```\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/20180209224814.png)\n\n**改变当前用户的shell**\n\n```shell\n# ubuntu linux\n$ sudo usermod -s /bin/zsh $USER\n$ exit\n\n# alpine linux\n# sed -i -e \"s/bin\\/ash/bin\\/zsh/\" /etc/passwd\n# exit\n```\n\n**重新登陆shell**\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/20180209225531.png)\n\n### 关于环境变量的问题\n\n> [https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu](https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu)\n>\n> The manual page zsh(1) states that zsh reads /etc/zsh/zprofile. You could simply add a command there \n>\n> which sources /etc/profile\n>\n> $ sudo vim /etc/zsh/zprofile\n>\n> \\# add source\n>\n> source /etc/profile\n>\n> exit\n>\n> login\n>\n> ok.....very tanks","slug":"install-zsh-on-ubuntu-alpine","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymr000gfwljo55oceks","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/seashell-3043735_1920.jpg\" alt=\"\"></p>\n<blockquote>\n<p>官网地址：<a href=\"https://ohmyz.sh/\" target=\"_blank\" rel=\"noopener\">https://ohmyz.sh/</a></p>\n<p>wiki: <a href=\"https://github.com/robbyrussell/oh-my-zsh/wiki\" target=\"_blank\" rel=\"noopener\">https://github.com/robbyrussell/oh-my-zsh/wiki</a></p>\n</blockquote>\n<a id=\"more\"></a>\n<p><strong>安装zsh</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ubuntu linux</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install -y zsh curl wget git</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> alpine linux</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add zsh curl wget git</span></span><br></pre></td></tr></table></figure>\n<p><strong>参照官网</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Via curl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sh -c <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Via wget</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sh -c <span class=\"string\">\"<span class=\"variable\">$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>\"</span></span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/20180209224814.png\" alt=\"\"></p>\n<p><strong>改变当前用户的shell</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ubuntu linux</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo usermod -s /bin/zsh <span class=\"variable\">$USER</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">exit</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> alpine linux</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sed -i -e <span class=\"string\">\"s/bin\\/ash/bin\\/zsh/\"</span> /etc/passwd</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">exit</span></span></span><br></pre></td></tr></table></figure>\n<p><strong>重新登陆shell</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/20180209225531.png\" alt=\"\"></p>\n<h3 id=\"关于环境变量的问题\"><a href=\"#关于环境变量的问题\" class=\"headerlink\" title=\"关于环境变量的问题\"></a>关于环境变量的问题</h3><blockquote>\n<p><a href=\"https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu\" target=\"_blank\" rel=\"noopener\">https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu</a></p>\n<p>The manual page zsh(1) states that zsh reads /etc/zsh/zprofile. You could simply add a command there </p>\n<p>which sources /etc/profile</p>\n<p>$ sudo vim /etc/zsh/zprofile</p>\n<p># add source</p>\n<p>source /etc/profile</p>\n<p>exit</p>\n<p>login</p>\n<p>ok…..very tanks</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/seashell-3043735_1920.jpg\" alt=\"\"></p>\n<blockquote>\n<p>官网地址：<a href=\"https://ohmyz.sh/\" target=\"_blank\" rel=\"noopener\">https://ohmyz.sh/</a></p>\n<p>wiki: <a href=\"https://github.com/robbyrussell/oh-my-zsh/wiki\" target=\"_blank\" rel=\"noopener\">https://github.com/robbyrussell/oh-my-zsh/wiki</a></p>\n</blockquote>","more":"<p><strong>安装zsh</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ubuntu linux</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo apt-get install -y zsh curl wget git</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> alpine linux</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add zsh curl wget git</span></span><br></pre></td></tr></table></figure>\n<p><strong>参照官网</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Via curl</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sh -c <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>\"</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> Via wget</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sh -c <span class=\"string\">\"<span class=\"variable\">$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)</span>\"</span></span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/20180209224814.png\" alt=\"\"></p>\n<p><strong>改变当前用户的shell</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ubuntu linux</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo usermod -s /bin/zsh <span class=\"variable\">$USER</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">exit</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> alpine linux</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> sed -i -e <span class=\"string\">\"s/bin\\/ash/bin\\/zsh/\"</span> /etc/passwd</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> <span class=\"built_in\">exit</span></span></span><br></pre></td></tr></table></figure>\n<p><strong>重新登陆shell</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/20180209225531.png\" alt=\"\"></p>\n<h3 id=\"关于环境变量的问题\"><a href=\"#关于环境变量的问题\" class=\"headerlink\" title=\"关于环境变量的问题\"></a>关于环境变量的问题</h3><blockquote>\n<p><a href=\"https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu\" target=\"_blank\" rel=\"noopener\">https://superuser.com/questions/41290/system-wide-environment-variables-for-zsh-on-ubuntu</a></p>\n<p>The manual page zsh(1) states that zsh reads /etc/zsh/zprofile. You could simply add a command there </p>\n<p>which sources /etc/profile</p>\n<p>$ sudo vim /etc/zsh/zprofile</p>\n<p># add source</p>\n<p>source /etc/profile</p>\n<p>exit</p>\n<p>login</p>\n<p>ok…..very tanks</p>\n</blockquote>"},{"layout":"post","title":"install-docker-on-ubuntu","date":"2018-02-26T12:54:04.000Z","_content":"\n![dog](https://blog.niuyuxian.tk/assets/images/2018-02-26/dog-2449668_1920.jpg)\n\n<!--more-->\n\n参考docker官方文档\n\n```\n#删除旧版本\nsudo apt-get remove docker docker-engine docker.io\n\nsudo apt-get update\n\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common -y\n    \ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n\nsudo apt-key fingerprint 0EBFCD88\n\nsudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n\nsudo apt-get update\n\nsudo apt-get install docker-ce -y\n\nsudo docker info\nor\nsudo systemctl status docker\n```\n\n**no sudo**\n\n```\n$ sudo usermod -aG docker $USER\n$ eixt &&  login\n```\n\n\n\n## 国内加速\n\n下面的加速器二选一\n\n**阿里云加速器**\n\n```\nsudo mkdir -p /etc/systemd/system/docker.service.d\n\nsudo tee /etc/systemd/system/docker.service.d/mirror.conf <<-'EOF'\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://1pdiorim.mirror.aliyuncs.com\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n**daocloud.io**\n\n```\ncurl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d2c27e88.m.daocloud.io\n\nsudo cat /etc/docker/daemon.json \n{\"registry-mirrors\": [\"http://d2c27e88.m.daocloud.io\"]}\n```\n\n\n\n## docker remote api\n\n```\n-------------------------\nsudo vim /etc/default/docker\n# 添加参数\nDOCKER_OPTS='-H 0.0.0.0:6000 -H unix:///var/run/docker.sock'\n \nsudo vim /lib/systemd/system/docker.service \n# 指定环境变量文件 \nEnvironmentFile=/etc/default/docker\nExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS\n-------------------------\n# 重启服务\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n# 查看端口\nps -ef|grep  docker\n\n参考: http://paper.seebug.org/354/\n```","source":"_posts/install-docker-on-ubuntu.md","raw":"---\nlayout: post\ntitle: install-docker-on-ubuntu\ndate: 2018-02-26 20:54:04\ntags: docker\n---\n\n![dog](https://blog.niuyuxian.tk/assets/images/2018-02-26/dog-2449668_1920.jpg)\n\n<!--more-->\n\n参考docker官方文档\n\n```\n#删除旧版本\nsudo apt-get remove docker docker-engine docker.io\n\nsudo apt-get update\n\nsudo apt-get install \\\n    apt-transport-https \\\n    ca-certificates \\\n    curl \\\n    software-properties-common -y\n    \ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -\n\nsudo apt-key fingerprint 0EBFCD88\n\nsudo add-apt-repository \\\n   \"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   $(lsb_release -cs) \\\n   stable\"\n\nsudo apt-get update\n\nsudo apt-get install docker-ce -y\n\nsudo docker info\nor\nsudo systemctl status docker\n```\n\n**no sudo**\n\n```\n$ sudo usermod -aG docker $USER\n$ eixt &&  login\n```\n\n\n\n## 国内加速\n\n下面的加速器二选一\n\n**阿里云加速器**\n\n```\nsudo mkdir -p /etc/systemd/system/docker.service.d\n\nsudo tee /etc/systemd/system/docker.service.d/mirror.conf <<-'EOF'\n[Service]\nExecStart=\nExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://1pdiorim.mirror.aliyuncs.com\nEOF\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n```\n\n**daocloud.io**\n\n```\ncurl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d2c27e88.m.daocloud.io\n\nsudo cat /etc/docker/daemon.json \n{\"registry-mirrors\": [\"http://d2c27e88.m.daocloud.io\"]}\n```\n\n\n\n## docker remote api\n\n```\n-------------------------\nsudo vim /etc/default/docker\n# 添加参数\nDOCKER_OPTS='-H 0.0.0.0:6000 -H unix:///var/run/docker.sock'\n \nsudo vim /lib/systemd/system/docker.service \n# 指定环境变量文件 \nEnvironmentFile=/etc/default/docker\nExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS\n-------------------------\n# 重启服务\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n\n# 查看端口\nps -ef|grep  docker\n\n参考: http://paper.seebug.org/354/\n```","slug":"install-docker-on-ubuntu","published":1,"updated":"2018-07-16T06:23:18.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymt000hfwljyqnd59b8","content":"<p><img src=\"https://blog.niuyuxian.tk/assets/images/2018-02-26/dog-2449668_1920.jpg\" alt=\"dog\"></p>\n<a id=\"more\"></a>\n<p>参考docker官方文档</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#删除旧版本</span><br><span class=\"line\">sudo apt-get remove docker docker-engine docker.io</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install \\</span><br><span class=\"line\">    apt-transport-https \\</span><br><span class=\"line\">    ca-certificates \\</span><br><span class=\"line\">    curl \\</span><br><span class=\"line\">    software-properties-common -y</span><br><span class=\"line\">    </span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-key fingerprint 0EBFCD88</span><br><span class=\"line\"></span><br><span class=\"line\">sudo add-apt-repository \\</span><br><span class=\"line\">   &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\</span><br><span class=\"line\">   $(lsb_release -cs) \\</span><br><span class=\"line\">   stable&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install docker-ce -y</span><br><span class=\"line\"></span><br><span class=\"line\">sudo docker info</span><br><span class=\"line\">or</span><br><span class=\"line\">sudo systemctl status docker</span><br></pre></td></tr></table></figure>\n<p><strong>no sudo</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo usermod -aG docker $USER</span><br><span class=\"line\">$ eixt &amp;&amp;  login</span><br></pre></td></tr></table></figure>\n<h2 id=\"国内加速\"><a href=\"#国内加速\" class=\"headerlink\" title=\"国内加速\"></a>国内加速</h2><p>下面的加速器二选一</p>\n<p><strong>阿里云加速器</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/systemd/system/docker.service.d</span><br><span class=\"line\"></span><br><span class=\"line\">sudo tee /etc/systemd/system/docker.service.d/mirror.conf &lt;&lt;-&apos;EOF&apos;</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=</span><br><span class=\"line\">ExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://1pdiorim.mirror.aliyuncs.com</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n<p><strong>daocloud.io</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d2c27e88.m.daocloud.io</span><br><span class=\"line\"></span><br><span class=\"line\">sudo cat /etc/docker/daemon.json </span><br><span class=\"line\">&#123;&quot;registry-mirrors&quot;: [&quot;http://d2c27e88.m.daocloud.io&quot;]&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"docker-remote-api\"><a href=\"#docker-remote-api\" class=\"headerlink\" title=\"docker remote api\"></a>docker remote api</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-------------------------</span><br><span class=\"line\">sudo vim /etc/default/docker</span><br><span class=\"line\"># 添加参数</span><br><span class=\"line\">DOCKER_OPTS=&apos;-H 0.0.0.0:6000 -H unix:///var/run/docker.sock&apos;</span><br><span class=\"line\"> </span><br><span class=\"line\">sudo vim /lib/systemd/system/docker.service </span><br><span class=\"line\"># 指定环境变量文件 </span><br><span class=\"line\">EnvironmentFile=/etc/default/docker</span><br><span class=\"line\">ExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS</span><br><span class=\"line\">-------------------------</span><br><span class=\"line\"># 重启服务</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看端口</span><br><span class=\"line\">ps -ef|grep  docker</span><br><span class=\"line\"></span><br><span class=\"line\">参考: http://paper.seebug.org/354/</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.niuyuxian.tk/assets/images/2018-02-26/dog-2449668_1920.jpg\" alt=\"dog\"></p>","more":"<p>参考docker官方文档</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">#删除旧版本</span><br><span class=\"line\">sudo apt-get remove docker docker-engine docker.io</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install \\</span><br><span class=\"line\">    apt-transport-https \\</span><br><span class=\"line\">    ca-certificates \\</span><br><span class=\"line\">    curl \\</span><br><span class=\"line\">    software-properties-common -y</span><br><span class=\"line\">    </span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-key fingerprint 0EBFCD88</span><br><span class=\"line\"></span><br><span class=\"line\">sudo add-apt-repository \\</span><br><span class=\"line\">   &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\</span><br><span class=\"line\">   $(lsb_release -cs) \\</span><br><span class=\"line\">   stable&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt-get install docker-ce -y</span><br><span class=\"line\"></span><br><span class=\"line\">sudo docker info</span><br><span class=\"line\">or</span><br><span class=\"line\">sudo systemctl status docker</span><br></pre></td></tr></table></figure>\n<p><strong>no sudo</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo usermod -aG docker $USER</span><br><span class=\"line\">$ eixt &amp;&amp;  login</span><br></pre></td></tr></table></figure>\n<h2 id=\"国内加速\"><a href=\"#国内加速\" class=\"headerlink\" title=\"国内加速\"></a>国内加速</h2><p>下面的加速器二选一</p>\n<p><strong>阿里云加速器</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo mkdir -p /etc/systemd/system/docker.service.d</span><br><span class=\"line\"></span><br><span class=\"line\">sudo tee /etc/systemd/system/docker.service.d/mirror.conf &lt;&lt;-&apos;EOF&apos;</span><br><span class=\"line\">[Service]</span><br><span class=\"line\">ExecStart=</span><br><span class=\"line\">ExecStart=/usr/bin/docker daemon -H fd:// --registry-mirror=https://1pdiorim.mirror.aliyuncs.com</span><br><span class=\"line\">EOF</span><br><span class=\"line\"></span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>\n<p><strong>daocloud.io</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://d2c27e88.m.daocloud.io</span><br><span class=\"line\"></span><br><span class=\"line\">sudo cat /etc/docker/daemon.json </span><br><span class=\"line\">&#123;&quot;registry-mirrors&quot;: [&quot;http://d2c27e88.m.daocloud.io&quot;]&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"docker-remote-api\"><a href=\"#docker-remote-api\" class=\"headerlink\" title=\"docker remote api\"></a>docker remote api</h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">-------------------------</span><br><span class=\"line\">sudo vim /etc/default/docker</span><br><span class=\"line\"># 添加参数</span><br><span class=\"line\">DOCKER_OPTS=&apos;-H 0.0.0.0:6000 -H unix:///var/run/docker.sock&apos;</span><br><span class=\"line\"> </span><br><span class=\"line\">sudo vim /lib/systemd/system/docker.service </span><br><span class=\"line\"># 指定环境变量文件 </span><br><span class=\"line\">EnvironmentFile=/etc/default/docker</span><br><span class=\"line\">ExecStart=/usr/bin/dockerd -H fd:// $DOCKER_OPTS</span><br><span class=\"line\">-------------------------</span><br><span class=\"line\"># 重启服务</span><br><span class=\"line\">sudo systemctl daemon-reload</span><br><span class=\"line\">sudo systemctl restart docker</span><br><span class=\"line\"></span><br><span class=\"line\"># 查看端口</span><br><span class=\"line\">ps -ef|grep  docker</span><br><span class=\"line\"></span><br><span class=\"line\">参考: http://paper.seebug.org/354/</span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"spring boot多数据源连接","date":"2018-02-07T09:30:17.000Z","_content":"\n\n\n![](https://blog.xlinyu.com/assets/images/2018-02-07/2015011809214111213.jpg)\n\n\n\n## 应用场景\n\n因业务需求，项目需要同时连接两个不同的数据，如mysql、postgres。\n\n<!-- more -->\n\n**项目结构**\n\n![](https://blog.xlinyu.com/assets/images/2018-02-07/20180207205017.png)\n\n\n\n## 附源码\n\n[https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases](https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases)\n\n","source":"_posts/multiple-databases-with-spring-boot-and-spring-data-jpa.md","raw":"---\nlayout: post\ntitle: spring boot多数据源连接\ndate: 2018-02-07 17:30:17\ntags: spring-boot\n---\n\n\n\n![](https://blog.xlinyu.com/assets/images/2018-02-07/2015011809214111213.jpg)\n\n\n\n## 应用场景\n\n因业务需求，项目需要同时连接两个不同的数据，如mysql、postgres。\n\n<!-- more -->\n\n**项目结构**\n\n![](https://blog.xlinyu.com/assets/images/2018-02-07/20180207205017.png)\n\n\n\n## 附源码\n\n[https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases](https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases)\n\n","slug":"multiple-databases-with-spring-boot-and-spring-data-jpa","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymv000jfwljen5mriwo","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/2015011809214111213.jpg\" alt=\"\"></p>\n<h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h2><p>因业务需求，项目需要同时连接两个不同的数据，如mysql、postgres。</p>\n<a id=\"more\"></a>\n<p><strong>项目结构</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/20180207205017.png\" alt=\"\"></p>\n<h2 id=\"附源码\"><a href=\"#附源码\" class=\"headerlink\" title=\"附源码\"></a>附源码</h2><p><a href=\"https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases\" target=\"_blank\" rel=\"noopener\">https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases</a></p>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/2015011809214111213.jpg\" alt=\"\"></p>\n<h2 id=\"应用场景\"><a href=\"#应用场景\" class=\"headerlink\" title=\"应用场景\"></a>应用场景</h2><p>因业务需求，项目需要同时连接两个不同的数据，如mysql、postgres。</p>","more":"<p><strong>项目结构</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/20180207205017.png\" alt=\"\"></p>\n<h2 id=\"附源码\"><a href=\"#附源码\" class=\"headerlink\" title=\"附源码\"></a>附源码</h2><p><a href=\"https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases\" target=\"_blank\" rel=\"noopener\">https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-multiple-databases</a></p>"},{"layout":"post","title":"在docker上运行postgres实例","date":"2018-02-07T08:36:37.000Z","_content":"\n\n\n![postgres](https://blog.xlinyu.com/assets/images/2018-02-07/2015011809283211487.jpg)\n\ndocker image直接从docker hub [官网](https://hub.docker.com/_/postgres/)获取，这里选用alpine的系统，image比较小``postgres:10.1-alpine``\n\n```shell\n➜  ~ docker pull postgres:10.1-alpine\n➜  ~ docker run -d --name pg -p 5432:5432 -e POSTGRES_PASSWORD=pg  postgres:10.1-alpine\n```\n\n<!-- more -->\n\n**容器状态**\n\n```\n➜  ~ docker ps\nCONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS                    NAMES\n0c798e446cbe        postgres:10.1-alpine   \"docker-entrypoint...\"   15 minutes ago      Up 15 minutes       0.0.0.0:5432->5432/tcp   pg\n➜  ~ \n```\n\n**pgAdmin连接数据库**\n\n![postgres](https://blog.xlinyu.com/assets/images/2018-02-07/20180207165109.png)\n\n> postgres镜像默认的用户名为`postgres`\n>\n> 登陆口令为创建容器是指定的值。\n\n\n\n","source":"_posts/run-postgres-instance-on-docker.md","raw":"---\nlayout: post\ntitle: 在docker上运行postgres实例\ndate: 2018-02-07 16:36:37\ntags: postgres\n---\n\n\n\n![postgres](https://blog.xlinyu.com/assets/images/2018-02-07/2015011809283211487.jpg)\n\ndocker image直接从docker hub [官网](https://hub.docker.com/_/postgres/)获取，这里选用alpine的系统，image比较小``postgres:10.1-alpine``\n\n```shell\n➜  ~ docker pull postgres:10.1-alpine\n➜  ~ docker run -d --name pg -p 5432:5432 -e POSTGRES_PASSWORD=pg  postgres:10.1-alpine\n```\n\n<!-- more -->\n\n**容器状态**\n\n```\n➜  ~ docker ps\nCONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS                    NAMES\n0c798e446cbe        postgres:10.1-alpine   \"docker-entrypoint...\"   15 minutes ago      Up 15 minutes       0.0.0.0:5432->5432/tcp   pg\n➜  ~ \n```\n\n**pgAdmin连接数据库**\n\n![postgres](https://blog.xlinyu.com/assets/images/2018-02-07/20180207165109.png)\n\n> postgres镜像默认的用户名为`postgres`\n>\n> 登陆口令为创建容器是指定的值。\n\n\n\n","slug":"run-postgres-instance-on-docker","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymx000lfwljd5qh7kus","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/2015011809283211487.jpg\" alt=\"postgres\"></p>\n<p>docker image直接从docker hub <a href=\"https://hub.docker.com/_/postgres/\" target=\"_blank\" rel=\"noopener\">官网</a>获取，这里选用alpine的系统，image比较小<code>postgres:10.1-alpine</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ docker pull postgres:10.1-alpine</span><br><span class=\"line\">➜  ~ docker run -d --name pg -p 5432:5432 -e POSTGRES_PASSWORD=pg  postgres:10.1-alpine</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p><strong>容器状态</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ docker ps</span><br><span class=\"line\">CONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class=\"line\">0c798e446cbe        postgres:10.1-alpine   &quot;docker-entrypoint...&quot;   15 minutes ago      Up 15 minutes       0.0.0.0:5432-&gt;5432/tcp   pg</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>\n<p><strong>pgAdmin连接数据库</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/20180207165109.png\" alt=\"postgres\"></p>\n<blockquote>\n<p>postgres镜像默认的用户名为<code>postgres</code></p>\n<p>登陆口令为创建容器是指定的值。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/2015011809283211487.jpg\" alt=\"postgres\"></p>\n<p>docker image直接从docker hub <a href=\"https://hub.docker.com/_/postgres/\" target=\"_blank\" rel=\"noopener\">官网</a>获取，这里选用alpine的系统，image比较小<code>postgres:10.1-alpine</code></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ docker pull postgres:10.1-alpine</span><br><span class=\"line\">➜  ~ docker run -d --name pg -p 5432:5432 -e POSTGRES_PASSWORD=pg  postgres:10.1-alpine</span><br></pre></td></tr></table></figure>","more":"<p><strong>容器状态</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">➜  ~ docker ps</span><br><span class=\"line\">CONTAINER ID        IMAGE                  COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class=\"line\">0c798e446cbe        postgres:10.1-alpine   &quot;docker-entrypoint...&quot;   15 minutes ago      Up 15 minutes       0.0.0.0:5432-&gt;5432/tcp   pg</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>\n<p><strong>pgAdmin连接数据库</strong></p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-07/20180207165109.png\" alt=\"postgres\"></p>\n<blockquote>\n<p>postgres镜像默认的用户名为<code>postgres</code></p>\n<p>登陆口令为创建容器是指定的值。</p>\n</blockquote>"},{"layout":"post","title":"nvm 安装 node on linux","date":"2018-02-09T15:05:38.000Z","_content":"\n![](https://blog.xlinyu.com/assets/images/2018-02-09/travel-3136679_1920.jpg)\n\n\tnvm 安装\n\tgit clone https://github.com/creationix/nvm.git\n\tcd nvm 执行 ./install.sh\n\t安装之后输入nvm还是提示没有nvm这时候需要执行source ./nvm.sh\n<!--more-->\n\n\tnvm安装任意版本nodejs\n\t1、通过nvm ls查看当前已经安装的node或者iojs版本；\n\t2、通过nvm ls-remote查看当前可以安装的node或者iojs版本；\n\t3、通过nvm install v8.0.0安装制定版本的nodejs；\n\t4、通过nvm use v8.0.0切换使用的nodejs版本；\n上述完成后，就可以使用nvm管理node了，但是开启一个新的shell或重启机器后，会出现找不到node命令的情况。\n\n\t#设置默认的node\n\t$ nvm alias default v8.0.0\n\nnvm 默认是从 http://nodejs.org/dist/ 下载的, 国外服务器, 必然很慢,\n好在 nvm 以及支持从镜像服务器下载包, 于是我们可以方便地从淘宝的 node dist 镜像下载:\n\n\t$ NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node nvm install v8.0.0\n\n于是你就会看到一段非常快速进度条:\n\n\t######################################################################## 100.0%\n\tNow using node v8.0.0\n\n如果你不想每次都输入环境变量 NVM_NODEJS_ORG_MIRROR, 那么我建议你加入到 .bashrc 文件中:\n\n\t# nvm\n\texport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node\n\tsource ~/.zshrc\n\t\n\techo $NVM_NODEJS_ORG_MIRROR\n\n![](https://blog.xlinyu.com/assets/images/2018-03-24/01.png)\n\n**npm 设置为淘宝的源**\n\n同理 nvm , npm 默认是从国外的源获取和下载包信息, 不慢才奇怪.\n可以通过简单的 ---registry 参数, 使用国内的镜像 https://registry.npm.taobao.org :\n\n\t$ npm --registry=https://registry.npm.taobao.org install koa\n\n**得到原本的镜像地址**\n```shell\t\n$npm get registry \n> https://registry.npmjs.org/\n$#设成淘宝的\n$ npm config set registry http://registry.npm.taobao.org/\n```\n**换成原来的**\n\n``` shell \n$ npm config set registry https://registry.npmjs.org/\n```\n\n","source":"_posts/nvm-install-node.md","raw":"---\nlayout: post\ntitle: nvm 安装 node on linux\ndate: 2018-02-09 23:05:38\ntags: ['nvm', 'node', 'npm']\n---\n\n![](https://blog.xlinyu.com/assets/images/2018-02-09/travel-3136679_1920.jpg)\n\n\tnvm 安装\n\tgit clone https://github.com/creationix/nvm.git\n\tcd nvm 执行 ./install.sh\n\t安装之后输入nvm还是提示没有nvm这时候需要执行source ./nvm.sh\n<!--more-->\n\n\tnvm安装任意版本nodejs\n\t1、通过nvm ls查看当前已经安装的node或者iojs版本；\n\t2、通过nvm ls-remote查看当前可以安装的node或者iojs版本；\n\t3、通过nvm install v8.0.0安装制定版本的nodejs；\n\t4、通过nvm use v8.0.0切换使用的nodejs版本；\n上述完成后，就可以使用nvm管理node了，但是开启一个新的shell或重启机器后，会出现找不到node命令的情况。\n\n\t#设置默认的node\n\t$ nvm alias default v8.0.0\n\nnvm 默认是从 http://nodejs.org/dist/ 下载的, 国外服务器, 必然很慢,\n好在 nvm 以及支持从镜像服务器下载包, 于是我们可以方便地从淘宝的 node dist 镜像下载:\n\n\t$ NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node nvm install v8.0.0\n\n于是你就会看到一段非常快速进度条:\n\n\t######################################################################## 100.0%\n\tNow using node v8.0.0\n\n如果你不想每次都输入环境变量 NVM_NODEJS_ORG_MIRROR, 那么我建议你加入到 .bashrc 文件中:\n\n\t# nvm\n\texport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node\n\tsource ~/.zshrc\n\t\n\techo $NVM_NODEJS_ORG_MIRROR\n\n![](https://blog.xlinyu.com/assets/images/2018-03-24/01.png)\n\n**npm 设置为淘宝的源**\n\n同理 nvm , npm 默认是从国外的源获取和下载包信息, 不慢才奇怪.\n可以通过简单的 ---registry 参数, 使用国内的镜像 https://registry.npm.taobao.org :\n\n\t$ npm --registry=https://registry.npm.taobao.org install koa\n\n**得到原本的镜像地址**\n```shell\t\n$npm get registry \n> https://registry.npmjs.org/\n$#设成淘宝的\n$ npm config set registry http://registry.npm.taobao.org/\n```\n**换成原来的**\n\n``` shell \n$ npm config set registry https://registry.npmjs.org/\n```\n\n","slug":"nvm-install-node","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ymy000nfwljpx7483ru","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/travel-3136679_1920.jpg\" alt=\"\"></p>\n<pre><code>nvm 安装\ngit clone https://github.com/creationix/nvm.git\ncd nvm 执行 ./install.sh\n安装之后输入nvm还是提示没有nvm这时候需要执行source ./nvm.sh\n</code></pre><a id=\"more\"></a>\n<pre><code>nvm安装任意版本nodejs\n1、通过nvm ls查看当前已经安装的node或者iojs版本；\n2、通过nvm ls-remote查看当前可以安装的node或者iojs版本；\n3、通过nvm install v8.0.0安装制定版本的nodejs；\n4、通过nvm use v8.0.0切换使用的nodejs版本；\n</code></pre><p>上述完成后，就可以使用nvm管理node了，但是开启一个新的shell或重启机器后，会出现找不到node命令的情况。</p>\n<pre><code>#设置默认的node\n$ nvm alias default v8.0.0\n</code></pre><p>nvm 默认是从 <a href=\"http://nodejs.org/dist/\" target=\"_blank\" rel=\"noopener\">http://nodejs.org/dist/</a> 下载的, 国外服务器, 必然很慢,<br>好在 nvm 以及支持从镜像服务器下载包, 于是我们可以方便地从淘宝的 node dist 镜像下载:</p>\n<pre><code>$ NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node nvm install v8.0.0\n</code></pre><p>于是你就会看到一段非常快速进度条:</p>\n<pre><code>######################################################################## 100.0%\nNow using node v8.0.0\n</code></pre><p>如果你不想每次都输入环境变量 NVM_NODEJS_ORG_MIRROR, 那么我建议你加入到 .bashrc 文件中:</p>\n<pre><code># nvm\nexport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node\nsource ~/.zshrc\n\necho $NVM_NODEJS_ORG_MIRROR\n</code></pre><p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-24/01.png\" alt=\"\"></p>\n<p><strong>npm 设置为淘宝的源</strong></p>\n<p>同理 nvm , npm 默认是从国外的源获取和下载包信息, 不慢才奇怪.<br>可以通过简单的 —registry 参数, 使用国内的镜像 <a href=\"https://registry.npm.taobao.org\" target=\"_blank\" rel=\"noopener\">https://registry.npm.taobao.org</a> :</p>\n<pre><code>$ npm --registry=https://registry.npm.taobao.org install koa\n</code></pre><p><strong>得到原本的镜像地址</strong><br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">npm get registry </span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> https://registry.npmjs.org/</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"><span class=\"comment\">#设成淘宝的</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry http://registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>换成原来的</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry https://registry.npmjs.org/</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-09/travel-3136679_1920.jpg\" alt=\"\"></p>\n<pre><code>nvm 安装\ngit clone https://github.com/creationix/nvm.git\ncd nvm 执行 ./install.sh\n安装之后输入nvm还是提示没有nvm这时候需要执行source ./nvm.sh\n</code></pre>","more":"<pre><code>nvm安装任意版本nodejs\n1、通过nvm ls查看当前已经安装的node或者iojs版本；\n2、通过nvm ls-remote查看当前可以安装的node或者iojs版本；\n3、通过nvm install v8.0.0安装制定版本的nodejs；\n4、通过nvm use v8.0.0切换使用的nodejs版本；\n</code></pre><p>上述完成后，就可以使用nvm管理node了，但是开启一个新的shell或重启机器后，会出现找不到node命令的情况。</p>\n<pre><code>#设置默认的node\n$ nvm alias default v8.0.0\n</code></pre><p>nvm 默认是从 <a href=\"http://nodejs.org/dist/\" target=\"_blank\" rel=\"noopener\">http://nodejs.org/dist/</a> 下载的, 国外服务器, 必然很慢,<br>好在 nvm 以及支持从镜像服务器下载包, 于是我们可以方便地从淘宝的 node dist 镜像下载:</p>\n<pre><code>$ NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node nvm install v8.0.0\n</code></pre><p>于是你就会看到一段非常快速进度条:</p>\n<pre><code>######################################################################## 100.0%\nNow using node v8.0.0\n</code></pre><p>如果你不想每次都输入环境变量 NVM_NODEJS_ORG_MIRROR, 那么我建议你加入到 .bashrc 文件中:</p>\n<pre><code># nvm\nexport NVM_NODEJS_ORG_MIRROR=https://npm.taobao.org/mirrors/node\nsource ~/.zshrc\n\necho $NVM_NODEJS_ORG_MIRROR\n</code></pre><p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-24/01.png\" alt=\"\"></p>\n<p><strong>npm 设置为淘宝的源</strong></p>\n<p>同理 nvm , npm 默认是从国外的源获取和下载包信息, 不慢才奇怪.<br>可以通过简单的 —registry 参数, 使用国内的镜像 <a href=\"https://registry.npm.taobao.org\" target=\"_blank\" rel=\"noopener\">https://registry.npm.taobao.org</a> :</p>\n<pre><code>$ npm --registry=https://registry.npm.taobao.org install koa\n</code></pre><p><strong>得到原本的镜像地址</strong><br><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\">npm get registry </span></span><br><span class=\"line\"><span class=\"meta\">&gt;</span><span class=\"bash\"> https://registry.npmjs.org/</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"><span class=\"comment\">#设成淘宝的</span></span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry http://registry.npm.taobao.org/</span></span><br></pre></td></tr></table></figure></p>\n<p><strong>换成原来的</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> npm config <span class=\"built_in\">set</span> registry https://registry.npmjs.org/</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"ubuntu 18.04 桌面美化","date":"2018-05-06T05:28:19.000Z","_content":"\n![爆照](https://blog.xlinyu.com/assets/images/2018-05-06/success.png)\n\n## 安装sshd\n\n```bash\nsudo apt-get install net-tools\nsudo apt-get -y install openssh-server\nservice sshd status\nsystemctl status sshd\n```\n## 安装chrome\n\n```bash\n# Add Google Chrome Repository\nsudo wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\nsudo echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" | sudo tee /etc/apt/sources.list.d/google-chrome.list\n\n# Install Google Chrome\nsudo apt-get update\n\n# To Install Google Chrome Stable, use the below command.\nsudo apt-get -y install google-chrome-stable\n\n# activities or terminal\ngoogle-chrome\n```\n\n<!--more-->\n\n## 配置国内源\n\n```bash\n# https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/\nsudo mv /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo vim /etc/apt/sources.list\n# add \n# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n\n# 预发布软件源，不建议启用\n# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n\n\n```\n\n## Themes\n\n> https://www.cnblogs.com/feipeng8848/p/8970556.html\n\n```bash\nsudo apt install gnome-tweak-tool\nsudo apt install chrome-gnome-shell\nsudo apt install gnome-shell-extensions\n\nsudo apt install docky\nmkdir ~/.themes\nmkdir ~/.icons\n\ngit clone https://github.com/harshp2035/Gnome-OSX.git --depth=1\n\n# icons\ngit clone https://github.com/keeferrourke/la-capitaine-icon-theme.git --depth=1\ngit clone https://github.com/Hikari9/MacBuntu-OS-Icons MacBuntu-OS\n\n# install dash dock\nhttps://github.com/micheleg/dash-to-dock\n\n```\n\n## zsh\n\n```bash\n# Via curl\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n# Via wget\n# sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n\n\n# 手动安装\ngit clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \n\ncp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\n# ubuntu linux\nsudo usermod -s /bin/zsh $USER\n\n\n```\n\n","source":"_posts/ubuntu-desktop.md","raw":"---\nlayout: post\ntitle: ubuntu 18.04 桌面美化\ndate: 2018-05-06 13:28:19\ntags: ubuntu\n---\n\n![爆照](https://blog.xlinyu.com/assets/images/2018-05-06/success.png)\n\n## 安装sshd\n\n```bash\nsudo apt-get install net-tools\nsudo apt-get -y install openssh-server\nservice sshd status\nsystemctl status sshd\n```\n## 安装chrome\n\n```bash\n# Add Google Chrome Repository\nsudo wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -\nsudo echo \"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\" | sudo tee /etc/apt/sources.list.d/google-chrome.list\n\n# Install Google Chrome\nsudo apt-get update\n\n# To Install Google Chrome Stable, use the below command.\nsudo apt-get -y install google-chrome-stable\n\n# activities or terminal\ngoogle-chrome\n```\n\n<!--more-->\n\n## 配置国内源\n\n```bash\n# https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/\nsudo mv /etc/apt/sources.list /etc/apt/sources.list.bak\nsudo vim /etc/apt/sources.list\n# add \n# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse\ndeb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse\n\n# 预发布软件源，不建议启用\n# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse\n\n\n```\n\n## Themes\n\n> https://www.cnblogs.com/feipeng8848/p/8970556.html\n\n```bash\nsudo apt install gnome-tweak-tool\nsudo apt install chrome-gnome-shell\nsudo apt install gnome-shell-extensions\n\nsudo apt install docky\nmkdir ~/.themes\nmkdir ~/.icons\n\ngit clone https://github.com/harshp2035/Gnome-OSX.git --depth=1\n\n# icons\ngit clone https://github.com/keeferrourke/la-capitaine-icon-theme.git --depth=1\ngit clone https://github.com/Hikari9/MacBuntu-OS-Icons MacBuntu-OS\n\n# install dash dock\nhttps://github.com/micheleg/dash-to-dock\n\n```\n\n## zsh\n\n```bash\n# Via curl\n$ sh -c \"$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n# Via wget\n# sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"\n\n\n# 手动安装\ngit clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh \n\ncp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\n# ubuntu linux\nsudo usermod -s /bin/zsh $USER\n\n\n```\n\n","slug":"ubuntu-desktop","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12yn0000qfwljpw5nrsqv","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-05-06/success.png\" alt=\"爆照\"></p>\n<h2 id=\"安装sshd\"><a href=\"#安装sshd\" class=\"headerlink\" title=\"安装sshd\"></a>安装sshd</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install net-tools</span><br><span class=\"line\">sudo apt-get -y install openssh-server</span><br><span class=\"line\">service sshd status</span><br><span class=\"line\">systemctl status sshd</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装chrome\"><a href=\"#安装chrome\" class=\"headerlink\" title=\"安装chrome\"></a>安装chrome</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Add Google Chrome Repository</span></span><br><span class=\"line\">sudo wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -</span><br><span class=\"line\">sudo <span class=\"built_in\">echo</span> <span class=\"string\">\"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\"</span> | sudo tee /etc/apt/sources.list.d/google-chrome.list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Install Google Chrome</span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># To Install Google Chrome Stable, use the below command.</span></span><br><span class=\"line\">sudo apt-get -y install google-chrome-stable</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># activities or terminal</span></span><br><span class=\"line\">google-chrome</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<h2 id=\"配置国内源\"><a href=\"#配置国内源\" class=\"headerlink\" title=\"配置国内源\"></a>配置国内源</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/</span></span><br><span class=\"line\">sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class=\"line\">sudo vim /etc/apt/sources.list</span><br><span class=\"line\"><span class=\"comment\"># add </span></span><br><span class=\"line\"><span class=\"comment\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 预发布软件源，不建议启用</span></span><br><span class=\"line\"><span class=\"comment\"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Themes\"><a href=\"#Themes\" class=\"headerlink\" title=\"Themes\"></a>Themes</h2><blockquote>\n<p><a href=\"https://www.cnblogs.com/feipeng8848/p/8970556.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/feipeng8848/p/8970556.html</a></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install gnome-tweak-tool</span><br><span class=\"line\">sudo apt install chrome-gnome-shell</span><br><span class=\"line\">sudo apt install gnome-shell-extensions</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt install docky</span><br><span class=\"line\">mkdir ~/.themes</span><br><span class=\"line\">mkdir ~/.icons</span><br><span class=\"line\"></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/harshp2035/Gnome-OSX.git --depth=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># icons</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/keeferrourke/la-capitaine-icon-theme.git --depth=1</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/Hikari9/MacBuntu-OS-Icons MacBuntu-OS</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># install dash dock</span></span><br><span class=\"line\">https://github.com/micheleg/dash-to-dock</span><br></pre></td></tr></table></figure>\n<h2 id=\"zsh\"><a href=\"#zsh\" class=\"headerlink\" title=\"zsh\"></a>zsh</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Via curl</span></span><br><span class=\"line\">$ sh -c <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Via wget</span></span><br><span class=\"line\"><span class=\"comment\"># sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 手动安装</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh </span><br><span class=\"line\"></span><br><span class=\"line\">cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ubuntu linux</span></span><br><span class=\"line\">sudo usermod -s /bin/zsh <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-05-06/success.png\" alt=\"爆照\"></p>\n<h2 id=\"安装sshd\"><a href=\"#安装sshd\" class=\"headerlink\" title=\"安装sshd\"></a>安装sshd</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install net-tools</span><br><span class=\"line\">sudo apt-get -y install openssh-server</span><br><span class=\"line\">service sshd status</span><br><span class=\"line\">systemctl status sshd</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装chrome\"><a href=\"#安装chrome\" class=\"headerlink\" title=\"安装chrome\"></a>安装chrome</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Add Google Chrome Repository</span></span><br><span class=\"line\">sudo wget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo apt-key add -</span><br><span class=\"line\">sudo <span class=\"built_in\">echo</span> <span class=\"string\">\"deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main\"</span> | sudo tee /etc/apt/sources.list.d/google-chrome.list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Install Google Chrome</span></span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># To Install Google Chrome Stable, use the below command.</span></span><br><span class=\"line\">sudo apt-get -y install google-chrome-stable</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># activities or terminal</span></span><br><span class=\"line\">google-chrome</span><br></pre></td></tr></table></figure>","more":"<h2 id=\"配置国内源\"><a href=\"#配置国内源\" class=\"headerlink\" title=\"配置国内源\"></a>配置国内源</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/</span></span><br><span class=\"line\">sudo mv /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class=\"line\">sudo vim /etc/apt/sources.list</span><br><span class=\"line\"><span class=\"comment\"># add </span></span><br><span class=\"line\"><span class=\"comment\"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse</span></span><br><span class=\"line\">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-security main restricted universe multiverse</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 预发布软件源，不建议启用</span></span><br><span class=\"line\"><span class=\"comment\"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br><span class=\"line\"><span class=\"comment\"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"Themes\"><a href=\"#Themes\" class=\"headerlink\" title=\"Themes\"></a>Themes</h2><blockquote>\n<p><a href=\"https://www.cnblogs.com/feipeng8848/p/8970556.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/feipeng8848/p/8970556.html</a></p>\n</blockquote>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt install gnome-tweak-tool</span><br><span class=\"line\">sudo apt install chrome-gnome-shell</span><br><span class=\"line\">sudo apt install gnome-shell-extensions</span><br><span class=\"line\"></span><br><span class=\"line\">sudo apt install docky</span><br><span class=\"line\">mkdir ~/.themes</span><br><span class=\"line\">mkdir ~/.icons</span><br><span class=\"line\"></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/harshp2035/Gnome-OSX.git --depth=1</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># icons</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/keeferrourke/la-capitaine-icon-theme.git --depth=1</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/Hikari9/MacBuntu-OS-Icons MacBuntu-OS</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># install dash dock</span></span><br><span class=\"line\">https://github.com/micheleg/dash-to-dock</span><br></pre></td></tr></table></figure>\n<h2 id=\"zsh\"><a href=\"#zsh\" class=\"headerlink\" title=\"zsh\"></a>zsh</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Via curl</span></span><br><span class=\"line\">$ sh -c <span class=\"string\">\"<span class=\"variable\">$(curl -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Via wget</span></span><br><span class=\"line\"><span class=\"comment\"># sh -c \"$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 手动安装</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh </span><br><span class=\"line\"></span><br><span class=\"line\">cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># ubuntu linux</span></span><br><span class=\"line\">sudo usermod -s /bin/zsh <span class=\"variable\">$USER</span></span><br></pre></td></tr></table></figure>"},{"layout":"post","title":"spring boot部署中一个斜杠引发的血案","date":"2018-02-06T15:34:18.000Z","_content":"\n### org.thymeleaf.exceptions.TemplateInputException\n\n![美丽的火烈鸟](https://blog.xlinyu.com/assets/images/2018-02-06/2015011809154211067.jpg)\n\n\n\n本地开发环境没有任何问题，但是打成jar部署到服务器时，就出现异常信息了，以为没有把模板文件打入到jar中，可以通过``jar xvf spring-boot-thymeleaf-0.0.1-SNAPSHOT.jar ``查询jar中的内容，可以看到我们的模板文件。\n\n<!-- more -->\n\n![jar中的文件内容](https://blog.xlinyu.com/assets/images/2018-02-06/20180207000230.png)\n\n**后台异常信息**\n\n```tex\n2018-02-06 23:06:39.547 ERROR 13904 --- [p-nio-80-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause\n\norg.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers\n        at org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:246) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1104) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1060) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1011) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.spring4.view.ThymeleafView.renderFragment(ThymeleafView.java:335) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.spring4.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n\n```\n\n**项目结构如下图**\n![工程结构](https://blog.xlinyu.com/assets/images/2018-02-06/20180206233431.png)\n\n**问题代码**\n\n```java\n@Controller\n@RequestMapping(value = \"/demo\")\npublic class DemoController {\n\n    @GetMapping(value = \"/01\")\n    public String index_01(){\n        return \"/demo/01\";\n    }\n\n}\n```\n\n仔细排查后发现是``return \"/demo/01\";``这行代码多了个``/``，去掉``/``搞定。\n\n### 示例代码\n\n[https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf](https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf)\n","source":"_posts/spring-boot-thymeleaf.md","raw":"---\nlayout: post\ntitle: spring boot部署中一个斜杠引发的血案\ndate: 2018-02-06 23:34:18\ntags:  ['spring-boot', 'thymeleaf']\n---\n\n### org.thymeleaf.exceptions.TemplateInputException\n\n![美丽的火烈鸟](https://blog.xlinyu.com/assets/images/2018-02-06/2015011809154211067.jpg)\n\n\n\n本地开发环境没有任何问题，但是打成jar部署到服务器时，就出现异常信息了，以为没有把模板文件打入到jar中，可以通过``jar xvf spring-boot-thymeleaf-0.0.1-SNAPSHOT.jar ``查询jar中的内容，可以看到我们的模板文件。\n\n<!-- more -->\n\n![jar中的文件内容](https://blog.xlinyu.com/assets/images/2018-02-06/20180207000230.png)\n\n**后台异常信息**\n\n```tex\n2018-02-06 23:06:39.547 ERROR 13904 --- [p-nio-80-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause\n\norg.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers\n        at org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:246) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1104) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1060) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1011) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.spring4.view.ThymeleafView.renderFragment(ThymeleafView.java:335) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n        at org.thymeleaf.spring4.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]\n\n```\n\n**项目结构如下图**\n![工程结构](https://blog.xlinyu.com/assets/images/2018-02-06/20180206233431.png)\n\n**问题代码**\n\n```java\n@Controller\n@RequestMapping(value = \"/demo\")\npublic class DemoController {\n\n    @GetMapping(value = \"/01\")\n    public String index_01(){\n        return \"/demo/01\";\n    }\n\n}\n```\n\n仔细排查后发现是``return \"/demo/01\";``这行代码多了个``/``，去掉``/``搞定。\n\n### 示例代码\n\n[https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf](https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf)\n","slug":"spring-boot-thymeleaf","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12yn1000rfwljkaxx0xe2","content":"<h3 id=\"org-thymeleaf-exceptions-TemplateInputException\"><a href=\"#org-thymeleaf-exceptions-TemplateInputException\" class=\"headerlink\" title=\"org.thymeleaf.exceptions.TemplateInputException\"></a>org.thymeleaf.exceptions.TemplateInputException</h3><p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/2015011809154211067.jpg\" alt=\"美丽的火烈鸟\"></p>\n<p>本地开发环境没有任何问题，但是打成jar部署到服务器时，就出现异常信息了，以为没有把模板文件打入到jar中，可以通过<code>jar xvf spring-boot-thymeleaf-0.0.1-SNAPSHOT.jar</code>查询jar中的内容，可以看到我们的模板文件。</p>\n<a id=\"more\"></a>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180207000230.png\" alt=\"jar中的文件内容\"></p>\n<p><strong>后台异常信息</strong></p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2018-02-06 23:06:39.547 ERROR 13904 --- [p-nio-80-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause</span><br><span class=\"line\"></span><br><span class=\"line\">org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers</span><br><span class=\"line\">        at org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:246) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1104) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1060) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1011) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.spring4.view.ThymeleafView.renderFragment(ThymeleafView.java:335) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.spring4.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br></pre></td></tr></table></figure>\n<p><strong>项目结构如下图</strong><br><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206233431.png\" alt=\"工程结构\"></p>\n<p><strong>问题代码</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/demo\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping</span>(value = <span class=\"string\">\"/01\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index_01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"/demo/01\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>仔细排查后发现是<code>return &quot;/demo/01&quot;;</code>这行代码多了个<code>/</code>，去掉<code>/</code>搞定。</p>\n<h3 id=\"示例代码\"><a href=\"#示例代码\" class=\"headerlink\" title=\"示例代码\"></a>示例代码</h3><p><a href=\"https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf\" target=\"_blank\" rel=\"noopener\">https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf</a></p>\n","site":{"data":{}},"excerpt":"<h3 id=\"org-thymeleaf-exceptions-TemplateInputException\"><a href=\"#org-thymeleaf-exceptions-TemplateInputException\" class=\"headerlink\" title=\"org.thymeleaf.exceptions.TemplateInputException\"></a>org.thymeleaf.exceptions.TemplateInputException</h3><p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/2015011809154211067.jpg\" alt=\"美丽的火烈鸟\"></p>\n<p>本地开发环境没有任何问题，但是打成jar部署到服务器时，就出现异常信息了，以为没有把模板文件打入到jar中，可以通过<code>jar xvf spring-boot-thymeleaf-0.0.1-SNAPSHOT.jar</code>查询jar中的内容，可以看到我们的模板文件。</p>","more":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180207000230.png\" alt=\"jar中的文件内容\"></p>\n<p><strong>后台异常信息</strong></p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">2018-02-06 23:06:39.547 ERROR 13904 --- [p-nio-80-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers] with root cause</span><br><span class=\"line\"></span><br><span class=\"line\">org.thymeleaf.exceptions.TemplateInputException: Error resolving template \"/index\", template might not exist or might not be accessible by any of the configured Template Resolvers</span><br><span class=\"line\">        at org.thymeleaf.TemplateRepository.getTemplate(TemplateRepository.java:246) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1104) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1060) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.TemplateEngine.process(TemplateEngine.java:1011) ~[thymeleaf-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.spring4.view.ThymeleafView.renderFragment(ThymeleafView.java:335) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br><span class=\"line\">        at org.thymeleaf.spring4.view.ThymeleafView.render(ThymeleafView.java:190) ~[thymeleaf-spring4-2.1.6.RELEASE.jar!/:2.1.6.RELEASE]</span><br></pre></td></tr></table></figure>\n<p><strong>项目结构如下图</strong><br><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206233431.png\" alt=\"工程结构\"></p>\n<p><strong>问题代码</strong></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Controller</span></span><br><span class=\"line\"><span class=\"meta\">@RequestMapping</span>(value = <span class=\"string\">\"/demo\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DemoController</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@GetMapping</span>(value = <span class=\"string\">\"/01\"</span>)</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> String <span class=\"title\">index_01</span><span class=\"params\">()</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">\"/demo/01\"</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>仔细排查后发现是<code>return &quot;/demo/01&quot;;</code>这行代码多了个<code>/</code>，去掉<code>/</code>搞定。</p>\n<h3 id=\"示例代码\"><a href=\"#示例代码\" class=\"headerlink\" title=\"示例代码\"></a>示例代码</h3><p><a href=\"https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf\" target=\"_blank\" rel=\"noopener\">https://github.com/ncc0706/spring-boot-demos/tree/master/spring-boot-thymeleaf</a></p>"},{"layout":"post","title":"Ubuntu安装Jdk–大Java走起","date":"2018-02-06T14:37:15.000Z","_content":"\n![大java走起](https://blog.xlinyu.com/assets/images/2018-02-06/2015011811124013974.jpg)\n\n**下载java8的最新版本**\n\n```shell\n$ 两种方式下载\n$ curl -L \"http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\" -H \"Cookie: oraclelicense=accept-securebackup-cookie\"  -H \"Connection: keep-alive\" -O  \n\n$ wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\n```\n\n<!-- more -->\n\n解压到指定的目录\n\n```shell\n$ sudo tar -zxvf jdk-8u172-linux-x64.tar.gz -C /opt\n$ sudo ln -s /opt/jdk1.8.0_172 /opt/java \n```\n\n**配置环境变量**\n\n```shell\n$ sudo vim /etc/profile\n```\n\n![配置环境变量](https://blog.xlinyu.com/assets/images/2018-02-06/20180206234949.png)\n\n```shell\n# env\nexport JAVA_HOME=/opt/java\nexport CLASSPATH=.:$JAVA_HOME/jre/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$HOME/bin:$JAVA_HOME/bin\n```\n使环境变量生效\n\n```shell\n$ source /etc/profile\n```\n\n查看jdk版本\n\n![java -version](https://blog.xlinyu.com/assets/images/2018-02-06/20180206235648.png)\n","source":"_posts/ubuntu-install-jdk.md","raw":"---\nlayout: post\ntitle: Ubuntu安装Jdk–大Java走起\ndate: 2018-02-06 22:37:15\ntags: ['java', 'jdk']\n---\n\n![大java走起](https://blog.xlinyu.com/assets/images/2018-02-06/2015011811124013974.jpg)\n\n**下载java8的最新版本**\n\n```shell\n$ 两种方式下载\n$ curl -L \"http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\" -H \"Cookie: oraclelicense=accept-securebackup-cookie\"  -H \"Connection: keep-alive\" -O  \n\n$ wget --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\n```\n\n<!-- more -->\n\n解压到指定的目录\n\n```shell\n$ sudo tar -zxvf jdk-8u172-linux-x64.tar.gz -C /opt\n$ sudo ln -s /opt/jdk1.8.0_172 /opt/java \n```\n\n**配置环境变量**\n\n```shell\n$ sudo vim /etc/profile\n```\n\n![配置环境变量](https://blog.xlinyu.com/assets/images/2018-02-06/20180206234949.png)\n\n```shell\n# env\nexport JAVA_HOME=/opt/java\nexport CLASSPATH=.:$JAVA_HOME/jre/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\nexport PATH=$PATH:$HOME/bin:$JAVA_HOME/bin\n```\n使环境变量生效\n\n```shell\n$ source /etc/profile\n```\n\n查看jdk版本\n\n![java -version](https://blog.xlinyu.com/assets/images/2018-02-06/20180206235648.png)\n","slug":"ubuntu-install-jdk","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12yn3000tfwljni7qwtxy","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/2015011811124013974.jpg\" alt=\"大java走起\"></p>\n<p><strong>下载java8的最新版本</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> 两种方式下载</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> curl -L <span class=\"string\">\"http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\"</span> -H <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span>  -H <span class=\"string\">\"Connection: keep-alive\"</span> -O  </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget --no-check-certificate --no-cookies --header <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span> http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<p>解压到指定的目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo tar -zxvf jdk-8u172-linux-x64.tar.gz -C /opt</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo ln -s /opt/jdk1.8.0_172 /opt/java</span></span><br></pre></td></tr></table></figure>\n<p><strong>配置环境变量</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo vim /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206234949.png\" alt=\"配置环境变量\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> env</span></span><br><span class=\"line\">export JAVA_HOME=/opt/java</span><br><span class=\"line\">export CLASSPATH=.:$JAVA_HOME/jre/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export PATH=$PATH:$HOME/bin:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure>\n<p>使环境变量生效</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p>查看jdk版本</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206235648.png\" alt=\"java -version\"></p>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/2015011811124013974.jpg\" alt=\"大java走起\"></p>\n<p><strong>下载java8的最新版本</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> 两种方式下载</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> curl -L <span class=\"string\">\"http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz\"</span> -H <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span>  -H <span class=\"string\">\"Connection: keep-alive\"</span> -O  </span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget --no-check-certificate --no-cookies --header <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span> http://download.oracle.com/otn-pub/java/jdk/8u172-b11/a58eab1ec242421181065cdc37240b08/jdk-8u172-linux-x64.tar.gz</span></span><br></pre></td></tr></table></figure>","more":"<p>解压到指定的目录</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo tar -zxvf jdk-8u172-linux-x64.tar.gz -C /opt</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo ln -s /opt/jdk1.8.0_172 /opt/java</span></span><br></pre></td></tr></table></figure>\n<p><strong>配置环境变量</strong></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> sudo vim /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206234949.png\" alt=\"配置环境变量\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> env</span></span><br><span class=\"line\">export JAVA_HOME=/opt/java</span><br><span class=\"line\">export CLASSPATH=.:$JAVA_HOME/jre/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class=\"line\">export PATH=$PATH:$HOME/bin:$JAVA_HOME/bin</span><br></pre></td></tr></table></figure>\n<p>使环境变量生效</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">source</span> /etc/profile</span></span><br></pre></td></tr></table></figure>\n<p>查看jdk版本</p>\n<p><img src=\"https://blog.xlinyu.com/assets/images/2018-02-06/20180206235648.png\" alt=\"java -version\"></p>"},{"layout":"post","title":"spring data jpa一对多，save之后，子表新增了一条数据，老的数据没有删除，而是更新成为null","date":"2018-03-28T04:41:56.000Z","_content":"\n![](https://blog.xlinyu.com/assets/images/2018-03-28/01.jpg)\n\n> 问题：使用了jpa的@OneToMany注解，当更新子表中的数据时，子表中新增了一条新纪录，并将旧的数据的外键id设置为null，因此产生了孤儿数据，于是查找资料找到了``orphanRemoval``设置为true可以删除孤儿数据\n\n<!--more-->\n\n添加了``orphanRemoval=true``又跳进了另一个坑\n\n```java\norg.springframework.orm.jpa.JpaSystemException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs; nested exception is org.hibernate.HibernateException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs\n\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:333)\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:521)\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:761)\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:730)\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:518)\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:292)\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\n\tat io.arukas.service.PostService$$EnhancerBySpringCGLIB$$bb9beb55.update(<generated>)\n\tat io.arukas.service.PostServiceTests.updatePost(PostServiceTests.java:40)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: org.hibernate.HibernateException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs\n\tat org.hibernate.engine.internal.Collections.processDereferencedCollection(Collections.java:99)\n\tat org.hibernate.engine.internal.Collections.processUnreachableCollection(Collections.java:50)\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushCollections(AbstractFlushingEventListener.java:243)\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:86)\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:38)\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1282)\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:465)\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2963)\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2339)\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:485)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:147)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:231)\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:65)\n\tat org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:61)\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:517)\n\t... 37 more\n```\n\n\n\n``PostImage.java``\n\n```java\n@Data\n@Entity\n@Table(name = \"post_imgs\")\n@EntityListeners(AuditingEntityListener.class)\npublic class PostImage {\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\n    private String id;\n\n    private String imageUrl;\n\n    @CreatedDate\n    private Date createAt;\n\n    @LastModifiedDate\n    private Date updateAt;\n\n    @Version\n    private long version;\n}\n```\n\n``Post.java``\n\n```java\n@Data\n@Entity\n@Table(name = \"posts\")\n@EntityListeners(AuditingEntityListener.class)\npublic class Post {\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\n    private String id;\n\n    private String title;\n\n    private String summary;\n\n    private String content;\n\n    @ManyToOne\n    @JoinColumn(name = \"author_id\",\n            foreignKey = @ForeignKey(name = \"fk_author_id\"),\n            referencedColumnName = \"id\")\n    private User author;\n\n    @CreatedDate\n    private Date createAt;\n\n    @LastModifiedDate\n    private Date updateAt;\n\n    @ManyToMany\n    @JoinTable(\n            name = \"posts_tags\",\n            joinColumns = @JoinColumn(name = \"post_id\"),\n            inverseJoinColumns = @JoinColumn(name = \"tag_id\"))\n    private Set<Tag> tags;\n\n    @OneToMany\n    @JoinColumn(name = \"post_id\")\n    private Set<Comment> comments = new HashSet<>();\n\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n    // 一定要指定这个 不然就成了多对多了\n    @JoinColumn(name = \"post_id\")\n    private Set<PostImage> imgs = new HashSet<>();\n\n    // 查找点评数量\n    // 注意这里是标准的sql，not HQL\n    @Formula(\"(select count(t.id) from comments t where t.post_id = id)\")\n    private Integer commentNum;\n\n    @Version\n    private long version;\n}\n```\n\n``PostService.java``\n\n```java\n@Transactional\npublic Post update(Post post) {\n\n    // db取出原始数据\n    String id = post.getId();\n    Post dbPost = postRepository.findOne(id);\n    Set<PostImage> imgs = dbPost.getImgs();\n    imgs.clear();\n    imgs.addAll(post.getImgs());\n    post.setImgs(imgs);\n\n    // 将新增数据copy到db的模型中\n    BeanUtilsAssembler.merge(post, dbPost);\n    return postRepository.save(dbPost);\n}\n```\n\n最终执行sql，看sql还是需要优化呢，以后有空解决吧。。。\n\n```mysql\nHibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?\nHibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?\nHibernate: select imgs0_.post_id as post_id6_1_0_, imgs0_.id as id1_1_0_, imgs0_.id as id1_1_1_, imgs0_.image_url as image_ur2_1_1_, imgs0_.create_at as create_a3_1_1_, imgs0_.update_at as update_a4_1_1_, imgs0_.version as version5_1_1_ from post_imgs imgs0_ where imgs0_.post_id=?\nHibernate: insert into post_imgs (image_url, create_at, update_at, version, id) values (?, ?, ?, ?, ?)\nHibernate: update posts set title=?, summary=?, content=?, author_id=?, create_at=?, update_at=?, version=? where id=? and version=?\nHibernate: update post_imgs set post_id=null where post_id=? and id=?\nHibernate: update post_imgs set post_id=? where id=?\nHibernate: delete from post_imgs where id=? and version=?\n```\n\n> https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow","source":"_posts/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance.md","raw":"---\nlayout: post\ntitle: spring data jpa一对多，save之后，子表新增了一条数据，老的数据没有删除，而是更新成为null\ndate: 2018-03-28 12:41:56\ntags: ['jpa', 'hibernate']\n\n---\n\n![](https://blog.xlinyu.com/assets/images/2018-03-28/01.jpg)\n\n> 问题：使用了jpa的@OneToMany注解，当更新子表中的数据时，子表中新增了一条新纪录，并将旧的数据的外键id设置为null，因此产生了孤儿数据，于是查找资料找到了``orphanRemoval``设置为true可以删除孤儿数据\n\n<!--more-->\n\n添加了``orphanRemoval=true``又跳进了另一个坑\n\n```java\norg.springframework.orm.jpa.JpaSystemException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs; nested exception is org.hibernate.HibernateException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs\n\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:333)\n\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:521)\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:761)\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:730)\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:518)\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:292)\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96)\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179)\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\n\tat io.arukas.service.PostService$$EnhancerBySpringCGLIB$$bb9beb55.update(<generated>)\n\tat io.arukas.service.PostServiceTests.updatePost(PostServiceTests.java:40)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat java.lang.reflect.Method.invoke(Method.java:498)\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)\n\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)\n\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:252)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:94)\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:191)\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47)\n\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242)\n\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)\nCaused by: org.hibernate.HibernateException: A collection with cascade=\"all-delete-orphan\" was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs\n\tat org.hibernate.engine.internal.Collections.processDereferencedCollection(Collections.java:99)\n\tat org.hibernate.engine.internal.Collections.processUnreachableCollection(Collections.java:50)\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushCollections(AbstractFlushingEventListener.java:243)\n\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:86)\n\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:38)\n\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1282)\n\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:465)\n\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2963)\n\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:2339)\n\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:485)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:147)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$100(JdbcResourceLocalTransactionCoordinatorImpl.java:38)\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:231)\n\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:65)\n\tat org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:61)\n\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:517)\n\t... 37 more\n```\n\n\n\n``PostImage.java``\n\n```java\n@Data\n@Entity\n@Table(name = \"post_imgs\")\n@EntityListeners(AuditingEntityListener.class)\npublic class PostImage {\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\n    private String id;\n\n    private String imageUrl;\n\n    @CreatedDate\n    private Date createAt;\n\n    @LastModifiedDate\n    private Date updateAt;\n\n    @Version\n    private long version;\n}\n```\n\n``Post.java``\n\n```java\n@Data\n@Entity\n@Table(name = \"posts\")\n@EntityListeners(AuditingEntityListener.class)\npublic class Post {\n\n    @Id\n    @GeneratedValue(generator = \"uuid\")\n    @GenericGenerator(name = \"uuid\", strategy = \"org.hibernate.id.UUIDGenerator\")\n    private String id;\n\n    private String title;\n\n    private String summary;\n\n    private String content;\n\n    @ManyToOne\n    @JoinColumn(name = \"author_id\",\n            foreignKey = @ForeignKey(name = \"fk_author_id\"),\n            referencedColumnName = \"id\")\n    private User author;\n\n    @CreatedDate\n    private Date createAt;\n\n    @LastModifiedDate\n    private Date updateAt;\n\n    @ManyToMany\n    @JoinTable(\n            name = \"posts_tags\",\n            joinColumns = @JoinColumn(name = \"post_id\"),\n            inverseJoinColumns = @JoinColumn(name = \"tag_id\"))\n    private Set<Tag> tags;\n\n    @OneToMany\n    @JoinColumn(name = \"post_id\")\n    private Set<Comment> comments = new HashSet<>();\n\n    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true)\n    // 一定要指定这个 不然就成了多对多了\n    @JoinColumn(name = \"post_id\")\n    private Set<PostImage> imgs = new HashSet<>();\n\n    // 查找点评数量\n    // 注意这里是标准的sql，not HQL\n    @Formula(\"(select count(t.id) from comments t where t.post_id = id)\")\n    private Integer commentNum;\n\n    @Version\n    private long version;\n}\n```\n\n``PostService.java``\n\n```java\n@Transactional\npublic Post update(Post post) {\n\n    // db取出原始数据\n    String id = post.getId();\n    Post dbPost = postRepository.findOne(id);\n    Set<PostImage> imgs = dbPost.getImgs();\n    imgs.clear();\n    imgs.addAll(post.getImgs());\n    post.setImgs(imgs);\n\n    // 将新增数据copy到db的模型中\n    BeanUtilsAssembler.merge(post, dbPost);\n    return postRepository.save(dbPost);\n}\n```\n\n最终执行sql，看sql还是需要优化呢，以后有空解决吧。。。\n\n```mysql\nHibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?\nHibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?\nHibernate: select imgs0_.post_id as post_id6_1_0_, imgs0_.id as id1_1_0_, imgs0_.id as id1_1_1_, imgs0_.image_url as image_ur2_1_1_, imgs0_.create_at as create_a3_1_1_, imgs0_.update_at as update_a4_1_1_, imgs0_.version as version5_1_1_ from post_imgs imgs0_ where imgs0_.post_id=?\nHibernate: insert into post_imgs (image_url, create_at, update_at, version, id) values (?, ?, ?, ?, ?)\nHibernate: update posts set title=?, summary=?, content=?, author_id=?, create_at=?, update_at=?, version=? where id=? and version=?\nHibernate: update post_imgs set post_id=null where post_id=? and id=?\nHibernate: update post_imgs set post_id=? where id=?\nHibernate: delete from post_imgs where id=? and version=?\n```\n\n> https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow","slug":"a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-owning-entity-instance","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ynq001sfwljfgjvtvyf","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-28/01.jpg\" alt=\"\"></p>\n<blockquote>\n<p>问题：使用了jpa的@OneToMany注解，当更新子表中的数据时，子表中新增了一条新纪录，并将旧的数据的外键id设置为null，因此产生了孤儿数据，于是查找资料找到了<code>orphanRemoval</code>设置为true可以删除孤儿数据</p>\n</blockquote>\n<a id=\"more\"></a>\n<p>添加了<code>orphanRemoval=true</code>又跳进了另一个坑</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.orm.jpa.JpaSystemException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs; nested exception is org.hibernate.HibernateException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs</span><br><span class=\"line\"></span><br><span class=\"line\">\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:<span class=\"number\">333</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:<span class=\"number\">244</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:<span class=\"number\">521</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:<span class=\"number\">761</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:<span class=\"number\">730</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:<span class=\"number\">518</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:<span class=\"number\">292</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:<span class=\"number\">96</span>)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:<span class=\"number\">179</span>)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:<span class=\"number\">673</span>)</span><br><span class=\"line\">\tat io.arukas.service.PostService$$EnhancerBySpringCGLIB$$bb9beb55.update(&lt;generated&gt;)</span><br><span class=\"line\">\tat io.arukas.service.PostServiceTests.updatePost(PostServiceTests.java:<span class=\"number\">40</span>)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class=\"number\">62</span>)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class=\"number\">43</span>)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:<span class=\"number\">498</span>)</span><br><span class=\"line\">\tat org.junit.runners.model.FrameworkMethod$<span class=\"number\">1</span>.runReflectiveCall(FrameworkMethod.java:<span class=\"number\">50</span>)</span><br><span class=\"line\">\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:<span class=\"number\">12</span>)</span><br><span class=\"line\">\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:<span class=\"number\">47</span>)</span><br><span class=\"line\">\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:<span class=\"number\">17</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:<span class=\"number\">75</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:<span class=\"number\">86</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:<span class=\"number\">84</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:<span class=\"number\">325</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:<span class=\"number\">252</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:<span class=\"number\">94</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">3</span>.run(ParentRunner.java:<span class=\"number\">290</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">1</span>.schedule(ParentRunner.java:<span class=\"number\">71</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:<span class=\"number\">288</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.access$<span class=\"number\">000</span>(ParentRunner.java:<span class=\"number\">58</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">2</span>.evaluate(ParentRunner.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.run(ParentRunner.java:<span class=\"number\">363</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:<span class=\"number\">191</span>)</span><br><span class=\"line\">\tat org.junit.runner.JUnitCore.run(JUnitCore.java:<span class=\"number\">137</span>)</span><br><span class=\"line\">\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:<span class=\"number\">68</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:<span class=\"number\">47</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:<span class=\"number\">242</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">Caused by: org.hibernate.HibernateException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs</span><br><span class=\"line\">\tat org.hibernate.engine.internal.Collections.processDereferencedCollection(Collections.java:<span class=\"number\">99</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.internal.Collections.processUnreachableCollection(Collections.java:<span class=\"number\">50</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushCollections(AbstractFlushingEventListener.java:<span class=\"number\">243</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:<span class=\"number\">86</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:<span class=\"number\">38</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:<span class=\"number\">1282</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:<span class=\"number\">465</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:<span class=\"number\">2963</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:<span class=\"number\">2339</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:<span class=\"number\">485</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">147</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$<span class=\"number\">100</span>(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">38</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">231</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:<span class=\"number\">65</span>)</span><br><span class=\"line\">\tat org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:<span class=\"number\">517</span>)</span><br><span class=\"line\">\t... <span class=\"number\">37</span> more</span><br></pre></td></tr></table></figure>\n<p><code>PostImage.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"meta\">@Table</span>(name = <span class=\"string\">\"post_imgs\"</span>)</span><br><span class=\"line\"><span class=\"meta\">@EntityListeners</span>(AuditingEntityListener.class)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PostImage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Id</span></span><br><span class=\"line\">    <span class=\"meta\">@GeneratedValue</span>(generator = <span class=\"string\">\"uuid\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@GenericGenerator</span>(name = <span class=\"string\">\"uuid\"</span>, strategy = <span class=\"string\">\"org.hibernate.id.UUIDGenerator\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String imageUrl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@CreatedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@LastModifiedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Post.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"meta\">@Table</span>(name = <span class=\"string\">\"posts\"</span>)</span><br><span class=\"line\"><span class=\"meta\">@EntityListeners</span>(AuditingEntityListener.class)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Post</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Id</span></span><br><span class=\"line\">    <span class=\"meta\">@GeneratedValue</span>(generator = <span class=\"string\">\"uuid\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@GenericGenerator</span>(name = <span class=\"string\">\"uuid\"</span>, strategy = <span class=\"string\">\"org.hibernate.id.UUIDGenerator\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String summary;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String content;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ManyToOne</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"author_id\"</span>,</span><br><span class=\"line\">            foreignKey = <span class=\"meta\">@ForeignKey</span>(name = <span class=\"string\">\"fk_author_id\"</span>),</span><br><span class=\"line\">            referencedColumnName = <span class=\"string\">\"id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User author;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@CreatedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@LastModifiedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ManyToMany</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinTable</span>(</span><br><span class=\"line\">            name = <span class=\"string\">\"posts_tags\"</span>,</span><br><span class=\"line\">            joinColumns = <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>),</span><br><span class=\"line\">            inverseJoinColumns = <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"tag_id\"</span>))</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;Tag&gt; tags;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OneToMany</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;Comment&gt; comments = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OneToMany</span>(cascade = CascadeType.ALL, orphanRemoval = <span class=\"keyword\">true</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 一定要指定这个 不然就成了多对多了</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;PostImage&gt; imgs = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查找点评数量</span></span><br><span class=\"line\">    <span class=\"comment\">// 注意这里是标准的sql，not HQL</span></span><br><span class=\"line\">    <span class=\"meta\">@Formula</span>(<span class=\"string\">\"(select count(t.id) from comments t where t.post_id = id)\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer commentNum;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>PostService.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Post <span class=\"title\">update</span><span class=\"params\">(Post post)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// db取出原始数据</span></span><br><span class=\"line\">    String id = post.getId();</span><br><span class=\"line\">    Post dbPost = postRepository.findOne(id);</span><br><span class=\"line\">    Set&lt;PostImage&gt; imgs = dbPost.getImgs();</span><br><span class=\"line\">    imgs.clear();</span><br><span class=\"line\">    imgs.addAll(post.getImgs());</span><br><span class=\"line\">    post.setImgs(imgs);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 将新增数据copy到db的模型中</span></span><br><span class=\"line\">    BeanUtilsAssembler.merge(post, dbPost);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> postRepository.save(dbPost);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最终执行sql，看sql还是需要优化呢，以后有空解决吧。。。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?</span><br><span class=\"line\">Hibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?</span><br><span class=\"line\">Hibernate: select imgs0_.post_id as post_id6_1_0_, imgs0_.id as id1_1_0_, imgs0_.id as id1_1_1_, imgs0_.image_url as image_ur2_1_1_, imgs0_.create_at as create_a3_1_1_, imgs0_.update_at as update_a4_1_1_, imgs0_.version as version5_1_1_ from post_imgs imgs0_ where imgs0_.post_id=?</span><br><span class=\"line\">Hibernate: insert into post_imgs (image_url, create_at, update_at, version, id) values (?, ?, ?, ?, ?)</span><br><span class=\"line\">Hibernate: update posts set title=?, summary=?, content=?, author_id=?, create_at=?, update_at=?, version=? where id=? and version=?</span><br><span class=\"line\">Hibernate: update post_imgs set post_id=null where post_id=? and id=?</span><br><span class=\"line\">Hibernate: update post_imgs set post_id=? where id=?</span><br><span class=\"line\">Hibernate: delete from post_imgs where id=? and version=?</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow</a></p>\n</blockquote>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-28/01.jpg\" alt=\"\"></p>\n<blockquote>\n<p>问题：使用了jpa的@OneToMany注解，当更新子表中的数据时，子表中新增了一条新纪录，并将旧的数据的外键id设置为null，因此产生了孤儿数据，于是查找资料找到了<code>orphanRemoval</code>设置为true可以删除孤儿数据</p>\n</blockquote>","more":"<p>添加了<code>orphanRemoval=true</code>又跳进了另一个坑</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">org.springframework.orm.jpa.JpaSystemException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs; nested exception is org.hibernate.HibernateException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs</span><br><span class=\"line\"></span><br><span class=\"line\">\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:<span class=\"number\">333</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:<span class=\"number\">244</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:<span class=\"number\">521</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:<span class=\"number\">761</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:<span class=\"number\">730</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:<span class=\"number\">518</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:<span class=\"number\">292</span>)</span><br><span class=\"line\">\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:<span class=\"number\">96</span>)</span><br><span class=\"line\">\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:<span class=\"number\">179</span>)</span><br><span class=\"line\">\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:<span class=\"number\">673</span>)</span><br><span class=\"line\">\tat io.arukas.service.PostService$$EnhancerBySpringCGLIB$$bb9beb55.update(&lt;generated&gt;)</span><br><span class=\"line\">\tat io.arukas.service.PostServiceTests.updatePost(PostServiceTests.java:<span class=\"number\">40</span>)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class=\"line\">\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class=\"number\">62</span>)</span><br><span class=\"line\">\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class=\"number\">43</span>)</span><br><span class=\"line\">\tat java.lang.reflect.Method.invoke(Method.java:<span class=\"number\">498</span>)</span><br><span class=\"line\">\tat org.junit.runners.model.FrameworkMethod$<span class=\"number\">1</span>.runReflectiveCall(FrameworkMethod.java:<span class=\"number\">50</span>)</span><br><span class=\"line\">\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:<span class=\"number\">12</span>)</span><br><span class=\"line\">\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:<span class=\"number\">47</span>)</span><br><span class=\"line\">\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:<span class=\"number\">17</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:<span class=\"number\">75</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:<span class=\"number\">86</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:<span class=\"number\">84</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:<span class=\"number\">325</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:<span class=\"number\">252</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:<span class=\"number\">94</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">3</span>.run(ParentRunner.java:<span class=\"number\">290</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">1</span>.schedule(ParentRunner.java:<span class=\"number\">71</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:<span class=\"number\">288</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.access$<span class=\"number\">000</span>(ParentRunner.java:<span class=\"number\">58</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner$<span class=\"number\">2</span>.evaluate(ParentRunner.java:<span class=\"number\">268</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">\tat org.junit.runners.ParentRunner.run(ParentRunner.java:<span class=\"number\">363</span>)</span><br><span class=\"line\">\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:<span class=\"number\">191</span>)</span><br><span class=\"line\">\tat org.junit.runner.JUnitCore.run(JUnitCore.java:<span class=\"number\">137</span>)</span><br><span class=\"line\">\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:<span class=\"number\">68</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:<span class=\"number\">47</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:<span class=\"number\">242</span>)</span><br><span class=\"line\">\tat com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:<span class=\"number\">70</span>)</span><br><span class=\"line\">Caused by: org.hibernate.HibernateException: A collection with cascade=<span class=\"string\">\"all-delete-orphan\"</span> was no longer referenced by the owning entity instance: io.arukas.entity.Post.imgs</span><br><span class=\"line\">\tat org.hibernate.engine.internal.Collections.processDereferencedCollection(Collections.java:<span class=\"number\">99</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.internal.Collections.processUnreachableCollection(Collections.java:<span class=\"number\">50</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushCollections(AbstractFlushingEventListener.java:<span class=\"number\">243</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:<span class=\"number\">86</span>)</span><br><span class=\"line\">\tat org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:<span class=\"number\">38</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.flush(SessionImpl.java:<span class=\"number\">1282</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:<span class=\"number\">465</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:<span class=\"number\">2963</span>)</span><br><span class=\"line\">\tat org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:<span class=\"number\">2339</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:<span class=\"number\">485</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">147</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.access$<span class=\"number\">100</span>(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">38</span>)</span><br><span class=\"line\">\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:<span class=\"number\">231</span>)</span><br><span class=\"line\">\tat org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:<span class=\"number\">65</span>)</span><br><span class=\"line\">\tat org.hibernate.jpa.internal.TransactionImpl.commit(TransactionImpl.java:<span class=\"number\">61</span>)</span><br><span class=\"line\">\tat org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:<span class=\"number\">517</span>)</span><br><span class=\"line\">\t... <span class=\"number\">37</span> more</span><br></pre></td></tr></table></figure>\n<p><code>PostImage.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"meta\">@Table</span>(name = <span class=\"string\">\"post_imgs\"</span>)</span><br><span class=\"line\"><span class=\"meta\">@EntityListeners</span>(AuditingEntityListener.class)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">PostImage</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Id</span></span><br><span class=\"line\">    <span class=\"meta\">@GeneratedValue</span>(generator = <span class=\"string\">\"uuid\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@GenericGenerator</span>(name = <span class=\"string\">\"uuid\"</span>, strategy = <span class=\"string\">\"org.hibernate.id.UUIDGenerator\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String imageUrl;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@CreatedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@LastModifiedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>Post.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Data</span></span><br><span class=\"line\"><span class=\"meta\">@Entity</span></span><br><span class=\"line\"><span class=\"meta\">@Table</span>(name = <span class=\"string\">\"posts\"</span>)</span><br><span class=\"line\"><span class=\"meta\">@EntityListeners</span>(AuditingEntityListener.class)</span><br><span class=\"line\"><span class=\"keyword\">public</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Post</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Id</span></span><br><span class=\"line\">    <span class=\"meta\">@GeneratedValue</span>(generator = <span class=\"string\">\"uuid\"</span>)</span><br><span class=\"line\">    <span class=\"meta\">@GenericGenerator</span>(name = <span class=\"string\">\"uuid\"</span>, strategy = <span class=\"string\">\"org.hibernate.id.UUIDGenerator\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> String id;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String title;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String summary;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">private</span> String content;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ManyToOne</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"author_id\"</span>,</span><br><span class=\"line\">            foreignKey = <span class=\"meta\">@ForeignKey</span>(name = <span class=\"string\">\"fk_author_id\"</span>),</span><br><span class=\"line\">            referencedColumnName = <span class=\"string\">\"id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> User author;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@CreatedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date createAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@LastModifiedDate</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> Date updateAt;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@ManyToMany</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinTable</span>(</span><br><span class=\"line\">            name = <span class=\"string\">\"posts_tags\"</span>,</span><br><span class=\"line\">            joinColumns = <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>),</span><br><span class=\"line\">            inverseJoinColumns = <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"tag_id\"</span>))</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;Tag&gt; tags;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OneToMany</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;Comment&gt; comments = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@OneToMany</span>(cascade = CascadeType.ALL, orphanRemoval = <span class=\"keyword\">true</span>)</span><br><span class=\"line\">    <span class=\"comment\">// 一定要指定这个 不然就成了多对多了</span></span><br><span class=\"line\">    <span class=\"meta\">@JoinColumn</span>(name = <span class=\"string\">\"post_id\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Set&lt;PostImage&gt; imgs = <span class=\"keyword\">new</span> HashSet&lt;&gt;();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 查找点评数量</span></span><br><span class=\"line\">    <span class=\"comment\">// 注意这里是标准的sql，not HQL</span></span><br><span class=\"line\">    <span class=\"meta\">@Formula</span>(<span class=\"string\">\"(select count(t.id) from comments t where t.post_id = id)\"</span>)</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Integer commentNum;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"meta\">@Version</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">long</span> version;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p><code>PostService.java</code></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">@Transactional</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> Post <span class=\"title\">update</span><span class=\"params\">(Post post)</span> </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// db取出原始数据</span></span><br><span class=\"line\">    String id = post.getId();</span><br><span class=\"line\">    Post dbPost = postRepository.findOne(id);</span><br><span class=\"line\">    Set&lt;PostImage&gt; imgs = dbPost.getImgs();</span><br><span class=\"line\">    imgs.clear();</span><br><span class=\"line\">    imgs.addAll(post.getImgs());</span><br><span class=\"line\">    post.setImgs(imgs);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// 将新增数据copy到db的模型中</span></span><br><span class=\"line\">    BeanUtilsAssembler.merge(post, dbPost);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> postRepository.save(dbPost);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>最终执行sql，看sql还是需要优化呢，以后有空解决吧。。。</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Hibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?</span><br><span class=\"line\">Hibernate: select post0_.id as id1_2_0_, post0_.title as title2_2_0_, post0_.summary as summary3_2_0_, post0_.content as content4_2_0_, post0_.author_id as author_i8_2_0_, post0_.create_at as create_a5_2_0_, post0_.update_at as update_a6_2_0_, post0_.version as version7_2_0_, (select count(t.id) from comments t where t.post_id = post0_.id) as formula0_0_, user1_.id as id1_7_1_, user1_.username as username2_7_1_, user1_.password as password3_7_1_, user1_.birthday as birthday4_7_1_, user1_.gender as gender5_7_1_, user1_.unionid as unionid6_7_1_, user1_.create_at as create_a7_7_1_, user1_.update_at as update_a8_7_1_, user1_.version as version9_7_1_ from posts post0_ left outer join users user1_ on post0_.author_id=user1_.id where post0_.id=?</span><br><span class=\"line\">Hibernate: select imgs0_.post_id as post_id6_1_0_, imgs0_.id as id1_1_0_, imgs0_.id as id1_1_1_, imgs0_.image_url as image_ur2_1_1_, imgs0_.create_at as create_a3_1_1_, imgs0_.update_at as update_a4_1_1_, imgs0_.version as version5_1_1_ from post_imgs imgs0_ where imgs0_.post_id=?</span><br><span class=\"line\">Hibernate: insert into post_imgs (image_url, create_at, update_at, version, id) values (?, ?, ?, ?, ?)</span><br><span class=\"line\">Hibernate: update posts set title=?, summary=?, content=?, author_id=?, create_at=?, update_at=?, version=? where id=? and version=?</span><br><span class=\"line\">Hibernate: update post_imgs set post_id=null where post_id=? and id=?</span><br><span class=\"line\">Hibernate: update post_imgs set post_id=? where id=?</span><br><span class=\"line\">Hibernate: delete from post_imgs where id=? and version=?</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p><a href=\"https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow\" target=\"_blank\" rel=\"noopener\">https://stackoverflow.com/questions/9430640/a-collection-with-cascade-all-delete-orphan-was-no-longer-referenced-by-the-ow</a></p>\n</blockquote>"},{"layout":"post","title":"alpine linux 常用软件","date":"2018-03-25T12:53:02.000Z","_content":"\n![常用工具](https://blog.xlinyu.com/assets/images/2018-03-25/02.jpg)\n\n```shell\n# 首先学习关机命令\n# reboot   #重启系统类似于shutdown -r now。\n# halt     #关机类似于shutdown -h now。\n# poweroff #关机\n\n# telnet\n➜  ~ which telnet\ntelnet not found\n➜  ~ apk add busybox-extras\n(1/1) Installing busybox-extras (1.27.2-r8)\nExecuting busybox-extras-1.27.2-r8.post-install\nExecuting busybox-1.27.2-r8.trigger\nOK: 711 MiB in 66 packages\n➜  ~ which telnet\n/usr/bin/telnet\n➜  ~ \n```\n\n<!--more-->\n\n```shell\n# ab 命令\n# apk add apache2-utils\n\n# 安装service命令 \n# service not found\n# apk add openrc\n\n# 清除历史痕迹\n# rm -f $HISTFILE && exit\n```\n\n```shell\n# rc-update add docker boot #增加一个服务\n# rc-update del docker boot #删除一个服务\n\n# rc-status  #检查默认运行级别的状态\n# rc-status -a #检查所有运行级别的状态\n\n# rc-service sshd start #启动一个服务。\n# rc-service sshd stop  #停止一个服务。\n# rc-service sshd restart  #重启一个服务。\n# 或者下面的命令\n# service sshd status\n```\n\n","source":"_posts/alpine-tools.md","raw":"---\nlayout: post\ntitle: alpine linux 常用软件\ndate: 2018-03-25 20:53:02\ntags: alpine\n---\n\n![常用工具](https://blog.xlinyu.com/assets/images/2018-03-25/02.jpg)\n\n```shell\n# 首先学习关机命令\n# reboot   #重启系统类似于shutdown -r now。\n# halt     #关机类似于shutdown -h now。\n# poweroff #关机\n\n# telnet\n➜  ~ which telnet\ntelnet not found\n➜  ~ apk add busybox-extras\n(1/1) Installing busybox-extras (1.27.2-r8)\nExecuting busybox-extras-1.27.2-r8.post-install\nExecuting busybox-1.27.2-r8.trigger\nOK: 711 MiB in 66 packages\n➜  ~ which telnet\n/usr/bin/telnet\n➜  ~ \n```\n\n<!--more-->\n\n```shell\n# ab 命令\n# apk add apache2-utils\n\n# 安装service命令 \n# service not found\n# apk add openrc\n\n# 清除历史痕迹\n# rm -f $HISTFILE && exit\n```\n\n```shell\n# rc-update add docker boot #增加一个服务\n# rc-update del docker boot #删除一个服务\n\n# rc-status  #检查默认运行级别的状态\n# rc-status -a #检查所有运行级别的状态\n\n# rc-service sshd start #启动一个服务。\n# rc-service sshd stop  #停止一个服务。\n# rc-service sshd restart  #重启一个服务。\n# 或者下面的命令\n# service sshd status\n```\n\n","slug":"alpine-tools","published":1,"updated":"2018-07-16T06:00:23.000Z","comments":1,"photos":[],"link":"","_id":"cjjo12ynr001tfwlj0he83uko","content":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/02.jpg\" alt=\"常用工具\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 首先学习关机命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> reboot   <span class=\"comment\">#重启系统类似于shutdown -r now。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> halt     <span class=\"comment\">#关机类似于shutdown -h now。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> poweroff <span class=\"comment\">#关机</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> telnet</span></span><br><span class=\"line\">➜  ~ which telnet</span><br><span class=\"line\">telnet not found</span><br><span class=\"line\">➜  ~ apk add busybox-extras</span><br><span class=\"line\">(1/1) Installing busybox-extras (1.27.2-r8)</span><br><span class=\"line\">Executing busybox-extras-1.27.2-r8.post-install</span><br><span class=\"line\">Executing busybox-1.27.2-r8.trigger</span><br><span class=\"line\">OK: 711 MiB in 66 packages</span><br><span class=\"line\">➜  ~ which telnet</span><br><span class=\"line\">/usr/bin/telnet</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ab 命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add apache2-utils</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装service命令 </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> service not found</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add openrc</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 清除历史痕迹</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rm -f <span class=\"variable\">$HISTFILE</span> &amp;&amp; <span class=\"built_in\">exit</span></span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-update add docker boot <span class=\"comment\">#增加一个服务</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-update del docker boot <span class=\"comment\">#删除一个服务</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-status  <span class=\"comment\">#检查默认运行级别的状态</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-status -a <span class=\"comment\">#检查所有运行级别的状态</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd start <span class=\"comment\">#启动一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd stop  <span class=\"comment\">#停止一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd restart  <span class=\"comment\">#重启一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或者下面的命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> service sshd status</span></span><br></pre></td></tr></table></figure>\n","site":{"data":{}},"excerpt":"<p><img src=\"https://blog.xlinyu.com/assets/images/2018-03-25/02.jpg\" alt=\"常用工具\"></p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 首先学习关机命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> reboot   <span class=\"comment\">#重启系统类似于shutdown -r now。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> halt     <span class=\"comment\">#关机类似于shutdown -h now。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> poweroff <span class=\"comment\">#关机</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> telnet</span></span><br><span class=\"line\">➜  ~ which telnet</span><br><span class=\"line\">telnet not found</span><br><span class=\"line\">➜  ~ apk add busybox-extras</span><br><span class=\"line\">(1/1) Installing busybox-extras (1.27.2-r8)</span><br><span class=\"line\">Executing busybox-extras-1.27.2-r8.post-install</span><br><span class=\"line\">Executing busybox-1.27.2-r8.trigger</span><br><span class=\"line\">OK: 711 MiB in 66 packages</span><br><span class=\"line\">➜  ~ which telnet</span><br><span class=\"line\">/usr/bin/telnet</span><br><span class=\"line\">➜  ~</span><br></pre></td></tr></table></figure>","more":"<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> ab 命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add apache2-utils</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装service命令 </span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> service not found</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> apk add openrc</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 清除历史痕迹</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rm -f <span class=\"variable\">$HISTFILE</span> &amp;&amp; <span class=\"built_in\">exit</span></span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-update add docker boot <span class=\"comment\">#增加一个服务</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-update del docker boot <span class=\"comment\">#删除一个服务</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-status  <span class=\"comment\">#检查默认运行级别的状态</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-status -a <span class=\"comment\">#检查所有运行级别的状态</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd start <span class=\"comment\">#启动一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd stop  <span class=\"comment\">#停止一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> rc-service sshd restart  <span class=\"comment\">#重启一个服务。</span></span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 或者下面的命令</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> service sshd status</span></span><br></pre></td></tr></table></figure>"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"cjjo12ylv0000fwljdpbxapoh","tag_id":"cjjo12ym90002fwljkc0uobp4","_id":"cjjo12ymh0007fwljk1huoxtl"},{"post_id":"cjjo12ym50001fwlj3s5y9uif","tag_id":"cjjo12ymg0006fwljeyhb3cs2","_id":"cjjo12ymn000cfwljd6jtchu4"},{"post_id":"cjjo12ymj0009fwlj2smgebeo","tag_id":"cjjo12ymg0006fwljeyhb3cs2","_id":"cjjo12ymq000efwljpdkmkzxs"},{"post_id":"cjjo12ymb0003fwlj6808b295","tag_id":"cjjo12ymk000afwljrh07pqqw","_id":"cjjo12ymx000kfwljde9930fy"},{"post_id":"cjjo12ymb0003fwlj6808b295","tag_id":"cjjo12ymq000ffwljeun413pu","_id":"cjjo12ymy000mfwlj039nry9o"},{"post_id":"cjjo12ymd0004fwljc3ad1clx","tag_id":"cjjo12ymv000ifwljkwukmj1j","_id":"cjjo12yn0000pfwljunrgm2m2"},{"post_id":"cjjo12ymf0005fwljet35jsqx","tag_id":"cjjo12ymz000ofwlj3w369d62","_id":"cjjo12yn4000ufwljp4ywcghk"},{"post_id":"cjjo12ymh0008fwljmd4zkejx","tag_id":"cjjo12yn3000sfwljc68hqal4","_id":"cjjo12yn5000wfwljgc32ke62"},{"post_id":"cjjo12ymm000bfwlje7to3vdd","tag_id":"cjjo12yn5000vfwljfbvgwqf2","_id":"cjjo12yn6000yfwlj91zfcyje"},{"post_id":"cjjo12ymo000dfwljufriqchj","tag_id":"cjjo12yn6000xfwlj6m0yp3hy","_id":"cjjo12yn70010fwljek054qav"},{"post_id":"cjjo12ymr000gfwljo55oceks","tag_id":"cjjo12yn6000zfwlj6wwbdi6n","_id":"cjjo12yna0014fwlj0kwyd92b"},{"post_id":"cjjo12ymr000gfwljo55oceks","tag_id":"cjjo12yn70011fwlj1ge9drjw","_id":"cjjo12yna0015fwljx55ovikl"},{"post_id":"cjjo12ymr000gfwljo55oceks","tag_id":"cjjo12yn70012fwljsel8eknr","_id":"cjjo12ynb0017fwlj7uv7caqe"},{"post_id":"cjjo12ymt000hfwljyqnd59b8","tag_id":"cjjo12yn3000sfwljc68hqal4","_id":"cjjo12ynb0018fwlj2z2ljrlo"},{"post_id":"cjjo12ymv000jfwljen5mriwo","tag_id":"cjjo12yna0016fwljhyq3jb29","_id":"cjjo12ync001afwljtlkpttp4"},{"post_id":"cjjo12ymx000lfwljd5qh7kus","tag_id":"cjjo12ync0019fwljoznsc32d","_id":"cjjo12ynd001cfwljf5k0iz52"},{"post_id":"cjjo12ymy000nfwljpx7483ru","tag_id":"cjjo12ynd001bfwljucizmgim","_id":"cjjo12yne001gfwlj8dp3uk25"},{"post_id":"cjjo12ymy000nfwljpx7483ru","tag_id":"cjjo12ynd001dfwlj4utv11yo","_id":"cjjo12yne001hfwljzm7txg7j"},{"post_id":"cjjo12ymy000nfwljpx7483ru","tag_id":"cjjo12yne001efwlj36yyg1hn","_id":"cjjo12ynf001jfwlj7kh836ub"},{"post_id":"cjjo12yn0000qfwljpw5nrsqv","tag_id":"cjjo12yne001ffwljusvoje0u","_id":"cjjo12ynf001kfwlj8y3o8q0z"},{"post_id":"cjjo12yn1000rfwljkaxx0xe2","tag_id":"cjjo12yna0016fwljhyq3jb29","_id":"cjjo12yng001nfwljmpdlhre9"},{"post_id":"cjjo12yn1000rfwljkaxx0xe2","tag_id":"cjjo12ynf001lfwljxa4mv6v7","_id":"cjjo12yng001ofwljlih99eit"},{"post_id":"cjjo12yn3000tfwljni7qwtxy","tag_id":"cjjo12yng001mfwlj8ln1ywzq","_id":"cjjo12ynh001qfwljh6rzw9w6"},{"post_id":"cjjo12yn3000tfwljni7qwtxy","tag_id":"cjjo12yng001pfwljhrrpyv3o","_id":"cjjo12yni001rfwljpzc6fu03"},{"post_id":"cjjo12ynr001tfwlj0he83uko","tag_id":"cjjo12ymg0006fwljeyhb3cs2","_id":"cjjo12ynt001vfwlj9pudvl81"},{"post_id":"cjjo12ynq001sfwljfgjvtvyf","tag_id":"cjjo12yns001ufwljg4dbuadv","_id":"cjjo12ynt001xfwljn9vrit32"},{"post_id":"cjjo12ynq001sfwljfgjvtvyf","tag_id":"cjjo12ynt001wfwljph9mouv8","_id":"cjjo12ynt001yfwljqqu8u2hd"}],"Tag":[{"name":"ab","_id":"cjjo12ym90002fwljkc0uobp4"},{"name":"alpine","_id":"cjjo12ymg0006fwljeyhb3cs2"},{"name":"ssr","_id":"cjjo12ymk000afwljrh07pqqw"},{"name":"ss","_id":"cjjo12ymq000ffwljeun413pu"},{"name":"angular","_id":"cjjo12ymv000ifwljkwukmj1j"},{"name":"git","_id":"cjjo12ymz000ofwlj3w369d62"},{"name":"docker","_id":"cjjo12yn3000sfwljc68hqal4"},{"name":"docker alpine","_id":"cjjo12yn5000vfwljfbvgwqf2"},{"name":"hexo","_id":"cjjo12yn6000xfwlj6m0yp3hy"},{"name":"zsh","_id":"cjjo12yn6000zfwlj6wwbdi6n"},{"name":"bash","_id":"cjjo12yn70011fwlj1ge9drjw"},{"name":"shell","_id":"cjjo12yn70012fwljsel8eknr"},{"name":"spring-boot","_id":"cjjo12yna0016fwljhyq3jb29"},{"name":"postgres","_id":"cjjo12ync0019fwljoznsc32d"},{"name":"nvm","_id":"cjjo12ynd001bfwljucizmgim"},{"name":"node","_id":"cjjo12ynd001dfwlj4utv11yo"},{"name":"npm","_id":"cjjo12yne001efwlj36yyg1hn"},{"name":"ubuntu","_id":"cjjo12yne001ffwljusvoje0u"},{"name":"thymeleaf","_id":"cjjo12ynf001lfwljxa4mv6v7"},{"name":"java","_id":"cjjo12yng001mfwlj8ln1ywzq"},{"name":"jdk","_id":"cjjo12yng001pfwljhrrpyv3o"},{"name":"jpa","_id":"cjjo12yns001ufwljg4dbuadv"},{"name":"hibernate","_id":"cjjo12ynt001wfwljph9mouv8"}]}}